/*
Deployment script for Custom Searches

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/
GO

SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;
SET NUMERIC_ROUNDABORT OFF;
GO

DECLARE @sql NVARCHAR(2000)

WHILE(EXISTS(SELECT 1 from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE constraint_schema in ('gis', 'cus') and CONSTRAINT_TYPE='FOREIGN KEY'))
BEGIN
    SELECT TOP 1 @sql=('ALTER TABLE ' + TABLE_SCHEMA + '.[' + TABLE_NAME + '] DROP CONSTRAINT [' + CONSTRAINT_NAME + ']')
    FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS
    WHERE CONSTRAINT_TYPE = 'FOREIGN KEY'
	  and constraint_schema in ('gis', 'cus')
    EXEC(@sql) 
    PRINT @sql
END

WHILE(EXISTS(SELECT * from INFORMATION_SCHEMA.TABLES WHERE table_schema in ('gis', 'cus')))
BEGIN
    SELECT TOP 1 @sql=('DROP TABLE ' + TABLE_SCHEMA + '.[' + TABLE_NAME + ']')
    FROM INFORMATION_SCHEMA.TABLES
    WHERE table_schema in ('gis', 'cus')
    EXEC(@sql)
    PRINT @sql
END
GO

IF NOT EXISTS (SELECT * FROM sys.schemas WHERE name = N'cus')
EXEC sys.sp_executesql N'CREATE SCHEMA [cus] AUTHORIZATION [dbo]'
GO
PRINT N'Creating [gis]...';


GO
IF NOT EXISTS (SELECT * FROM sys.schemas WHERE name = N'gis')
EXEC sys.sp_executesql N'CREATE SCHEMA [gis] AUTHORIZATION [dbo]'
GO

CREATE TABLE [cus].[ChartTemplate](
	[ChartTemplateId] [int] IDENTITY(1,1) NOT NULL,
	[ChartType] [nvarchar](256) NOT NULL,
	[ChartTitle] [nvarchar](256) NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ChartTemplateId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[ChartType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[ChartType](
	[ChartType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ChartType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearch_ChartTemplate]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearch_ChartTemplate](
	[ChartTemplateId] [int] NOT NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ChartTemplateId] ASC,
	[CustomSearchDefinitionId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchBackendEntity]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchBackendEntity](
	[CustomSearchBackendEntityId] [int] IDENTITY(1,1) NOT NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
	[BackendEntityName] [nvarchar](4000) NULL,
	[BackendEntityKeyFieldName] [nvarchar](4000) NULL,
	[CustomSearchKeyFieldName] [nvarchar](256) NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchBackendEntityId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchCategory]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchCategory](
	[CustomSearchCategoryId] [int] IDENTITY(1,1) NOT NULL,
	[CategoryName] [nvarchar](256) NOT NULL,
	[CategoryDescription] [nvarchar](2048) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchCategoryId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchCategory_Definition]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchCategory_Definition](
	[CustomSearchCategoryId] [int] NOT NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchCategoryId] ASC,
	[CustomSearchDefinitionId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchColumnDefinition]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchColumnDefinition](
	[CustomSearchColumnDefinitionId] [int] IDENTITY(1,1) NOT NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
	[ColumnName] [nvarchar](256) NULL,
	[ColumnType] [nvarchar](256) NULL,
	[ColumnCategory] [nvarchar](256) NULL,
	[ColumnTypeLength] [int] NOT NULL,
	[CanBeUsedAsLookup] [bit] NULL,
	[IsEditable] [bit] NOT NULL,
	[BackendEntityName] [nvarchar](4000) NULL,
	[BackendEntityFieldName] [nvarchar](4000) NULL,
	[ForceEditLookupExpression] [bit] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchColumnDefinitionId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchDefinition]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchDefinition](
	[CustomSearchDefinitionId] [int] IDENTITY(1,1) NOT NULL,
	[CustomSearchName] [nvarchar](256) NOT NULL,
	[CustomSearchDescription] [nvarchar](2048) NOT NULL,
	[IsDeleted] [bit] NOT NULL,
	[StoredProcedureName] [nvarchar](256) NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchDefinitionId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchExpression]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchExpression](
	[CustomSearchExpressionId] [int] IDENTITY(1,1) NOT NULL,
	[DatasetID] [uniqueidentifier] NULL,
	[CustomSearchColumnDefinitionId] [int] NULL,
	[CustomSearchParameterId] [int] NULL,
	[DatasetPostProcessId] [int] NULL,
	[ExceptionPostProcessRuleId] [int] NULL,
	[CustomSearchValidationRuleId] [int] NULL,
	[DatasetChartId] [int] NULL,
	[ProjectTypeId] [int] NULL,
	[RScriptModelId] [int] NULL,
	[OwnerType] [nvarchar](256) NULL,
	[ExpressionType] [nvarchar](256) NOT NULL,
	[ExpressionRole] [nvarchar](256) NOT NULL,
	[Script] [nvarchar](max) NULL,
	[ColumnName] [nvarchar](256) NULL,
	[Category] [nvarchar](256) NULL,
	[ExpressionGroup] [nvarchar](256) NULL,
	[Note] [nvarchar](max) NULL,
	[ExecutionOrder] [int] NOT NULL,
	[ChartTemplateId] [int] NULL,
	[ExpressionExtensions] [nvarchar](max) NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchExpressionId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchParameter]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchParameter](
	[CustomSearchParameterId] [int] IDENTITY(1,1) NOT NULL,
	[OwnerType] [nvarchar](256) NULL,
	[CustomSearchDefinitionId] [int] NULL,
	[RScriptModelId] [int] NULL,
	[ParameterGroupName] [nvarchar](256) NOT NULL,
	[ParameterName] [nvarchar](256) NOT NULL,
	[ParameterDescription] [nvarchar](2048) NOT NULL,
	[ParameterDataType] [nvarchar](256) NOT NULL,
	[ParameterRangeType] [nvarchar](256) NOT NULL,
	[ParameterTypeLength] [int] NOT NULL,
	[ParameterDefaultValue] [nvarchar](max) NULL,
	[ParameterIsRequired] [bit] NOT NULL,
	[ForceEditLookupExpression] [bit] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchParameterId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[CustomSearchValidationRule]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[CustomSearchValidationRule](
	[CustomSearchValidationRuleId] [int] IDENTITY(1,1) NOT NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
	[Description] [nvarchar](4000) NOT NULL,
	[ExecutionOrder] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[CustomSearchValidationRuleId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[Dataset]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[Dataset](
	[DatasetId] [uniqueidentifier] NOT NULL,
	[SourceDatasetId] [uniqueidentifier] NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
	[UserId] [uniqueidentifier] NOT NULL,
	[ParentFolderId] [int] NULL,
	[DatasetName] [nvarchar](256) NOT NULL,
	[ParameterValues] [nvarchar](max) NULL,
	[DatasetClientState] [nvarchar](max) NULL,
	[TotalRows] [int] NOT NULL,
	[GeneratedTableName] [nvarchar](256) NOT NULL,
	[GenerateSchemaElapsedMs] [int] NOT NULL,
	[GenerateIndexesElapsedMs] [int] NOT NULL,
	[ExecuteStoreProcedureElapsedMs] [int] NOT NULL,
	[DbLockType] [nvarchar](256) NULL,
	[IsLocked] [bit] NOT NULL,
	[DatasetState] [nvarchar](256) NOT NULL,
	[DatasetPostProcessState] [nvarchar](256) NOT NULL,
	[LockingJobId] [int] NULL,
	[Comments] [nvarchar](max) NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[LastExecutedBy] [uniqueidentifier] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
	[LastExecutionTimeStamp] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[DatasetId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[DatasetPostProcess]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[DatasetPostProcess](
	[DatasetPostProcessId] [int] IDENTITY(1,1) NOT NULL,
	[PostProcessName] [nvarchar](256) NOT NULL,
	[DatasetId] [uniqueidentifier] NOT NULL,
	[ParameterValues] [nvarchar](max) NULL,
	[Priority] [int] NOT NULL,
	[PostProcessType] [nvarchar](256) NOT NULL,
	[PostProcessRole] [nvarchar](256) NULL,
	[PostProcessSubType] [nvarchar](256) NOT NULL,
	[RScriptModelId] [int] NULL,
	[PostProcessDefinition] [nvarchar](max) NULL,
	[ResultPayload] [nvarchar](max) NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
	[LastExecutionTimeStamp] [datetime] NULL,
	[IsDirty] [bit] NOT NULL,
	[CalculatedView] [nvarchar](max) NULL,
	[ExecutionOrder] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[DatasetPostProcessId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[DatasetPostProcessState]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[DatasetPostProcessState](
	[DatasetPostProcessState] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[DatasetPostProcessState] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[DatasetState]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[DatasetState](
	[DatasetState] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[DatasetState] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[DatasetUserClientState]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[DatasetUserClientState](
	[UserId] [uniqueidentifier] NOT NULL,
	[DatasetId] [uniqueidentifier] NOT NULL,
	[DatasetClientState] [nvarchar](max) NULL,
 CONSTRAINT [PK_DatasetUserClientState] PRIMARY KEY CLUSTERED 
(
	[UserId] ASC,
	[DatasetId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[DataType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[DataType](
	[DataType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[DataType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[DbLockType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[DbLockType](
	[DbLockType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[DbLockType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[ExceptionPostProcessRule]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[ExceptionPostProcessRule](
	[ExceptionPostProcessRuleId] [int] IDENTITY(1,1) NOT NULL,
	[DatasetPostProcessId] [int] NOT NULL,
	[GroupName] [nvarchar](256) NULL,
	[Description] [nvarchar](4000) NOT NULL,
	[ExecutionOrder] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ExceptionPostProcessRuleId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[ExpressionRole]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[ExpressionRole](
	[ExpressionRole] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ExpressionRole] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[ExpressionType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[ExpressionType](
	[ExpressionType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ExpressionType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[Folder]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[Folder](
	[FolderId] [int] IDENTITY(1,1) NOT NULL,
	[ParentFolderId] [int] NULL,
	[UserId] [uniqueidentifier] NULL,
	[FolderType] [nvarchar](256) NOT NULL,
	[FolderName] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[FolderId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[FolderType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[FolderType](
	[FolderType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[FolderType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[InteractiveChart]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[InteractiveChart](
	[InteractiveChartId] [int] IDENTITY(1,1) NOT NULL,
	[DatasetId] [uniqueidentifier] NOT NULL,
	[ChartType] [nvarchar](256) NOT NULL,
	[ChartTitle] [nvarchar](256) NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[InteractiveChartId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[OwnerType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[OwnerType](
	[OwnerType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[OwnerType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[PostProcessType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[PostProcessType](
	[PostProcessType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[PostProcessType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[ProjectType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[ProjectType](
	[ProjectTypeId] [int] IDENTITY(1,1) NOT NULL,
	[ProjectTypeName] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ProjectTypeId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[ProjectType_CustomSearchDefinition]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[ProjectType_CustomSearchDefinition](
	[ProjectTypeId] [int] NOT NULL,
	[DatasetRole] [nvarchar](256) NOT NULL,
	[CustomSearchDefinitionId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ProjectTypeId] ASC,
	[DatasetRole] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[RangeType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[RangeType](
	[RangeType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[RangeType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [cus].[RScriptModel]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[RScriptModel](
	[RScriptModelId] [int] IDENTITY(1,1) NOT NULL,
	[RScriptModelName] [nvarchar](256) NOT NULL,
	[RScriptModelRole] [nvarchar](256) NULL,
	[RScriptFileName] [nvarchar](2048) NOT NULL,
	[RScriptFolderName] [nvarchar](2048) NOT NULL,
	[RScript] [nvarchar](max) NULL,
	[RScriptModelTemplate] [nvarchar](max) NULL,
	[RScriptResultsDefinition] [nvarchar](max) NULL,
	[Description] [nvarchar](max) NULL,
PRIMARY KEY CLUSTERED 
(
	[RScriptModelId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[UserProject]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[UserProject](
	[UserProjectId] [int] IDENTITY(1,1) NOT NULL,
	[VersionNumber] [int] NOT NULL,
	[ProjectName] [nvarchar](256) NULL,
	[Comments] [nvarchar](max) NULL,
	[IsLocked] [bit] NULL,
	[AssessmentYear] [int] NOT NULL,
	[AssessmentDateFrom] [datetime] NOT NULL,
	[AssessmentDateTo] [datetime] NOT NULL,
	[SelectedAreas] [nvarchar](max) NULL,
	[RootVersionUserProjectId] [int] NULL,
	[UserId] [uniqueidentifier] NOT NULL,
	[ProjectTypeId] [int] NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserProjectId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [cus].[UserProject_Dataset]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [cus].[UserProject_Dataset](
	[UserProjectId] [int] NOT NULL,
	[DatasetId] [uniqueidentifier] NOT NULL,
	[OwnsDataset] [bit] NOT NULL,
	[DatasetRole] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserProjectId] ASC,
	[DatasetId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[WorkerJobQueue]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[WorkerJobQueue]') AND type in (N'U'))
DROP TABLE [dbo].[WorkerJobQueue]

CREATE TABLE [dbo].[WorkerJobQueue](
	[JobId] [int] IDENTITY(1,1) NOT NULL,
	[UserId] [uniqueidentifier] NOT NULL,
	[StartedTimestamp] [datetime] NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[QueueName] [nvarchar](256) NOT NULL,
	[JobType] [nvarchar](256) NOT NULL,
	[JobPayLoad] [nvarchar](max) NULL,
	[JobResult] [nvarchar](max) NULL,
	[ExecutionTime] [numeric](18, 0) NULL,
PRIMARY KEY CLUSTERED 
(
	[JobId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [gis].[Folder]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[Folder](
	[FolderId] [int] IDENTITY(1,1) NOT NULL,
	[ParentFolderId] [int] NULL,
	[UserId] [uniqueidentifier] NULL,
	[FolderName] [nvarchar](256) NOT NULL,
	[FolderPath] [nvarchar](max) NOT NULL,
	[FolderType] [nvarchar](256) NOT NULL,
	[FolderItemType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[FolderId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [gis].[FolderItemType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[FolderItemType](
	[FolderItemType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[FolderItemType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[FolderType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[FolderType](
	[FolderType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[FolderType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[LayerSource]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[LayerSource](
	[LayerSourceId] [int] IDENTITY(1,1) NOT NULL,
	[LayerSourceName] [nvarchar](256) NOT NULL,
	[LayerSourceAlias] [nvarchar](256) NOT NULL,
	[Jurisdiction] [nvarchar](256) NULL,
	[Organization] [nvarchar](256) NULL,
	[Description] [nvarchar](max) NULL,
	[IsParcelSource] [bit] NOT NULL,
	[DefaultMinZoom] [int] NOT NULL,
	[DefaultMaxZoom] [int] NOT NULL,
	[DefaultLabelMinZoom] [int] NOT NULL,
	[DefaultLabelMaxZoom] [int] NOT NULL,
	[IsVectorLayer] [bit] NOT NULL,
	[DataSourceUrl] [nvarchar](2048) NOT NULL,
	[TileSize] [int] NOT NULL,
	[DefaultMapboxLayer] [nvarchar](max) NOT NULL,
	[DefaultLabelMapboxLayer] [nvarchar](max) NOT NULL,
	[HasOfflineSupport] [bit] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[LayerSourceId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [gis].[MapRenderer]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[MapRenderer](
	[MapRendererId] [int] IDENTITY(1,1) NOT NULL,
	[MapRendererName] [nvarchar](256) NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[ParentFolderId] [int] NOT NULL,
	[IsLocked] [bit] NOT NULL,
	[HasLabelRenderer] [bit] NOT NULL,
	[DatasetId] [uniqueidentifier] NOT NULL,
	[MapRendererType] [nvarchar](256) NOT NULL,
	[MapRendererLogicType] [nvarchar](256) NOT NULL,
	[RendererRules] [nvarchar](max) NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MapRendererId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [gis].[MapRendererCategory]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[MapRendererCategory](
	[MapRendererCategoryId] [int] IDENTITY(1,1) NOT NULL,
	[CategoryName] [nvarchar](256) NOT NULL,
	[CategoryDescription] [nvarchar](2048) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MapRendererCategoryId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[MapRendererCategory_MapRenderer]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[MapRendererCategory_MapRenderer](
	[MapRendererCategoryId] [int] NOT NULL,
	[MapRendererId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MapRendererCategoryId] ASC,
	[MapRendererId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[MapRendererLogicType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[MapRendererLogicType](
	[MapRendererLogicType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MapRendererLogicType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[MapRendererType]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[MapRendererType](
	[MapRendererType] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MapRendererType] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[MapRendererUserSelection]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[MapRendererUserSelection](
	[UserId] [uniqueidentifier] NOT NULL,
	[MapRendererId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[UserMap]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[UserMap](
	[UserMapId] [int] IDENTITY(1,1) NOT NULL,
	[UserMapName] [nvarchar](256) NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[ParentFolderId] [int] NOT NULL,
	[IsLocked] [bit] NOT NULL,
	[CreatedTimestamp] [datetime] NOT NULL,
	[LastModifiedTimestamp] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserMapId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[UserMapCategory]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[UserMapCategory](
	[UserMapCategoryId] [int] IDENTITY(1,1) NOT NULL,
	[CategoryName] [nvarchar](256) NOT NULL,
	[CategoryDescription] [nvarchar](2048) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserMapCategoryId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[UserMapCategory_UserMap]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[UserMapCategory_UserMap](
	[UserMapCategoryId] [int] NOT NULL,
	[UserMapId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserMapCategoryId] ASC,
	[UserMapId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [gis].[UserMapLayer]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[UserMapLayer](
	[UserMapLayerId] [int] IDENTITY(1,1) NOT NULL,
	[UserMapId] [int] NOT NULL,
	[LayerSourceId] [int] NOT NULL,
	[MinZoomOverride] [int] NOT NULL,
	[MaxZoomOverride] [int] NOT NULL,
	[LabelMinZoomOverride] [int] NOT NULL,
	[LabelMaxZoomOverride] [int] NOT NULL,
	[MapboxLayer] [nvarchar](max) NOT NULL,
	[LabelMapboxLayer] [nvarchar](max) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserMapLayerId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [gis].[UserMapSelection]    Script Date: 11/4/2020 12:01:03 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [gis].[UserMapSelection](
	[UserId] [uniqueidentifier] NOT NULL,
	[UserMapId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[UserId] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'Bar')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'BoxPlot')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'Histogram')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'Line')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'Pie')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'Combo')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'ScatterPlot')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'ScatterPlotMatrix')
GO
INSERT [cus].[ChartType] ([ChartType]) VALUES (N'StackBar')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'bit')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'boolean')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'byte[]')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'char[]')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'date')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'datetime')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'datetimeoffset')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'decimal')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'double')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'guid')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'int16')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'int32')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'int64')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'numeric')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'nvarchar')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'single')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'string')
GO
INSERT [cus].[DataType] ([DataType]) VALUES (N'timespan')
GO
INSERT [cus].[DbLockType] ([DbLockType]) VALUES (N'Lock')
GO
INSERT [cus].[DbLockType] ([DbLockType]) VALUES (N'RootLock')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'CalculatedColumn')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'CalculatedColumnPostCommit')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'CalculatedColumnPreCommit')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'CalculatedColumnPreCommit_Dependent')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'CalculatedColumnPreCommit_Independent')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'DependentVariable')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'EditLookupExpression')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'FilterExpression')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'GroupFilterExpression')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'IndependentVariable')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'LookupExpression')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'RScriptParameter')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'ValidationConditionExpression')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'ValidationErrorExpression')
GO
INSERT [cus].[ExpressionRole] ([ExpressionRole]) VALUES (N'GroupByVariable')
GO
INSERT [cus].[ExpressionType] ([ExpressionType]) VALUES (N'JSonPayload')
GO
INSERT [cus].[ExpressionType] ([ExpressionType]) VALUES (N'RScript')
GO
INSERT [cus].[ExpressionType] ([ExpressionType]) VALUES (N'TSQL')
GO
INSERT [cus].[FolderType] ([FolderType]) VALUES (N'Shared')
GO
INSERT [cus].[FolderType] ([FolderType]) VALUES (N'System')
GO
INSERT [cus].[FolderType] ([FolderType]) VALUES (N'User')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'CustomSearchColumnDefinition')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'CustomSearchDefinition')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'CustomSearchParameter')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'CustomSearchValidationRule')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'Dataset')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'DatasetPostProcess')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'ExceptionPostProcessRule')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'InteractiveChart')
GO
INSERT [cus].[OwnerType] ([OwnerType]) VALUES (N'RScriptModel')
GO
INSERT [cus].[PostProcessType] ([PostProcessType]) VALUES (N'Exception')
GO
INSERT [cus].[PostProcessType] ([PostProcessType]) VALUES (N'ExceptionPostProcess')
GO
INSERT [cus].[PostProcessType] ([PostProcessType]) VALUES (N'FilterPostProcess')
GO
INSERT [cus].[PostProcessType] ([PostProcessType]) VALUES (N'RScriptPostProcess')
GO
SET IDENTITY_INSERT [cus].[ProjectType] ON 
GO
INSERT [cus].[ProjectType] ([ProjectTypeId], [ProjectTypeName]) VALUES (2, N'Annual Update')
GO
INSERT [cus].[ProjectType] ([ProjectTypeId], [ProjectTypeName]) VALUES (3, N'Physical Inspection')
GO
SET IDENTITY_INSERT [cus].[ProjectType] OFF
GO
INSERT [cus].[RangeType] ([RangeType]) VALUES (N'NotRanged')
GO
INSERT [cus].[RangeType] ([RangeType]) VALUES (N'RangeEnd')
GO
INSERT [cus].[RangeType] ([RangeType]) VALUES (N'RangeStart')
GO
INSERT [gis].[FolderItemType] ([FolderItemType]) VALUES (N'MapRenderer')
GO
INSERT [gis].[FolderItemType] ([FolderItemType]) VALUES (N'UserMap')
GO
INSERT [gis].[FolderType] ([FolderType]) VALUES (N'Shared')
GO
INSERT [gis].[FolderType] ([FolderType]) VALUES (N'System')
GO
INSERT [gis].[FolderType] ([FolderType]) VALUES (N'User')
GO
SET IDENTITY_INSERT [gis].[LayerSource] ON 
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (1, N'Parcel', N'Parcel', N'KC', N'KC', N'Parcel Source', 1, 14, 22, 14, 22, 1, N'v1.0/vectortiles/parcel/{z}/{y}/{x}', 256, N'{
		"id": "parcelLayer",
		"type": "fill",
		"source": "parcelSource",
		"source-layer": "parcel",
		"paint": {
			"fill-outline-color": [
				"case",
				[
					"boolean",
					[
						"feature-state",
						"isSearchResult"
					],
					false
				],
				"rgb(0,255,255)",
				"rgb(0,0,0)"
			],
			"fill-color": "rgb(0,0,0)"
		},
		"isBaseLayer": true,
		"isHighlightable": true,
		"layout": {
			"visibility": "visible"
		},
		"minzoom": 14,
		"maxzoom": 22
	}', N'{
      id: "parcel-label",
      type: "symbol",
      source: "parcel-label",
      minzoom: 15,
      maxzoom: 22,
      layout: {
        "symbol-placement": "point",
        "symbol-avoid-edges": true,
        "text-font": ["Open Sans Bold"],
        "text-field": ["get", "FORMATTER_PIN"],
        "icon-text-fit": "both",
        "text-size": 13,
      },
      paint: {
        "text-color": "#fff",
        "text-halo-color": "#000",
        "text-halo-width": 150,
      },
    }', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (2, N'Contour', N'Countour', N'KC', N'KC', N'Contour Source', 0, 14, 22, 14, 22, 1, N'v1.0/vectortiles/contour/{z}/{y}/{x}', 256, N'{
      "id": "countourLayer",
      "type": "line",
      "source": "countourSource",
      "source-layer": "contour",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer":  true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (3, N'agrpddstSource', N'agrpddstSource', N'KC', N'KC', N'agrpddstSource ', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/agrpddst/{z}/{y}/{x}', 256, N'{
      "id": "agrpddstLayer",
      "type": "fill",
      "source": "agrpddstSource",
      "source-layer": "agrpddst",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (4, N'encumbranceSource', N'encumbranceSource', N'KC', N'KC', N'encumbranceSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/encumbrance/{z}/{y}/{x}', 256, N'{
      "id": "encumbranceLayer",
      "type": "fill",
      "source": "encumbranceSource",
      "source-layer": "encumbrance",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (5, N'commercialAreasSource', N'commercialAreasSource', N'KC', N'KC', N'commercialAreasSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/Commercial_Areas/{z}/{y}/{x}', 256, N' {
      "id": "commercialAreasLayer",
      "type": "fill",
      "source": "commercialAreasSource",
      "source-layer": "Commercial_Areas",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (6, N'farmlandSource', N'farmlandSource', N'KC', N'KC', N'farmlandSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/farmland/{z}/{y}/{x}', 256, N'{
      "id": "farmlandLayer",
      "type": "fill",
      "source": "farmlandSource",
      "source-layer": "farmland",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (7, N'fldPlain100yrSource', N'fldPlain100yrSource', N'KC', N'KC', N'fldPlain100yrSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/fldplain_100yr/{z}/{y}/{x}', 256, N'{
      "id": "fldPlain100yrLayer",
      "type": "fill",
      "source": "fldPlain100yrSource",
      "source-layer": "fldplain_100yr",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (8, N'kcacodeSource', N'kcacodeSource', N'KC', N'KC', N'kcacodeSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/kcacode/{z}/{y}/{x}', 256, N'{
      "id": "kcacodeLayer",
      "type": "fill",
      "source": "kcacodeSource",
      "source-layer": "kcacode",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.0)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (10, N'kingcoSource', N'kingcoSource', N'KC', N'KC', N'kingcoSource', 0, 1, 22, 1, 22, 1, N'v1.0/vectortiles/kingco/{z}/{y}/{x}', 256, N'{
      "id": "kingcoLayer",
      "type": "fill",
      "source": "kingcoSource",
      "source-layer": "kingco",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.0)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (11, N'parkSource', N'parkSource', N'KC', N'KC', N'parkSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/park/{z}/{y}/{x}', 256, N'{
      "id": "parkLayer",
      "type": "fill",
      "source": "parkSource",
      "source-layer": "park",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (12, N'parkPropertySource', N'parkPropertySource', N'KC', N'KC', N'parkPropertySource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/park_property/{z}/{y}/{x}', 256, N'{
      "id": "parkPropertyLayer",
      "type": "fill",
      "source": "parkPropertySource",
      "source-layer": "park_property",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (13, N'parkOpDistSource', N'parkOpDistSource', N'KC', N'KC', N'parkOpDistSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/parkopdist/{z}/{y}/{x}', 256, N'{
      "id": "parkOpDistLayer",
      "type": "fill",
      "source": "parkOpDistSource",
      "source-layer": "parkopdist",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (16, N'plssSource', N'plssSource', N'KC', N'KC', N'plssSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/plss/{z}/{y}/{x}', 256, N'{
      "id": "plssLayer",
      "type": "fill",
      "source": "plssSource",
      "source-layer": "plss",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (17, N'plssQtrSource', N'plssQtrSource', N'KC', N'KC', N'plssQtrSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/plss_qtr/{z}/{y}/{x}', 256, N'{
      "id": "plssQtrLayer",
      "type": "fill",
      "source": "plssQtrSource",
      "source-layer": "plss_qtr",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (18, N'plssSecSource', N'plssSecSource', N'KC', N'KC', N'plssSecSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/plss_sec/{z}/{y}/{x}', 256, N'{
      "id": "plssSecLayer",
      "type": "fill",
      "source": "plssSecSource",
      "source-layer": "plss_sec",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (19, N'plssTwnSource', N'plssTwnSource', N'KC', N'KC', N'plssTwnSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/plss_twn/{z}/{y}/{x}', 256, N'{
      "id": "plssTwnLayer",
      "type": "fill",
      "source": "plssTwnSource",
      "source-layer": "plss_twn",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (20, N'resAreasSource', N'resAreasSource', N'KC', N'KC', N'resAreasSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/Res_Areas/{z}/{y}/{x}', 256, N'{
      "id": "resAreasLayer",
      "type": "fill",
      "source": "resAreasSource",
      "source-layer": "Res_Areas",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (21, N'rowSource', N'rowSource', N'KC', N'KC', N'rowSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/row/{z}/{y}/{x}', 256, N'{
      "id": "rowLayer",
      "type": "fill",
      "source": "rowSource",
      "source-layer": "row",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (22, N'soilsKJoinPFLGSource', N'soilsKJoinPFLGSource', N'KC', N'KC', N'soilsKJoinPFLGSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/Soils_K_JoinPFLG/{z}/{y}/{x}', 256, N'{
      "id": "soilsKJoinPFLGLayer",
      "type": "fill",
      "source": "soilsKJoinPFLGSource",
      "source-layer": "Soils_K_JoinPFLG",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (23, N'stAddressSource', N'stAddressSource', N'KC', N'KC', N'stAddressSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/st_address/{z}/{y}/{x}', 256, N'{
      "id": "stAddressLayer",
      "type": "line",
      "source": "stAddressSource",
      "source-layer": "st_address",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (24, N'swrDstSource', N'swrDstSource', N'KC', N'KC', N'swrDstSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/swrdst/{z}/{y}/{x}', 256, N'{
      "id": "swrDstLayer",
      "type": "fill",
      "source": "swrDstSource",
      "source-layer": "swrdst",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (25, N'tdrReceivingPropertiesSource', N'tdrReceivingPropertiesSource', N'KC', N'KC', N'tdrReceivingPropertiesSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/tdr_receiving_properties/{z}/{y}/{x}', 256, N'{
      "id": "tdrReceivingPropertiesLayer",
      "type": "fill",
      "source": "tdrReceivingPropertiesSource",
      "source-layer": "tdr_receiving_properties",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (26, N'tdrSendingPropertiesSource', N'tdrSendingPropertiesSource', N'KC', N'KC', N'tdrSendingPropertiesSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/tdr_sending_properties/{z}/{y}/{x}', 256, N'{
      "id": "tdrSendingPropertiesLayer",
      "type": "fill",
      "source": "tdrSendingPropertiesSource",
      "source-layer": "tdr_sending_properties",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (27, N'transNetworkSource', N'transNetworkSource', N'KC', N'KC', N'transNetworkSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/Trans_network/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkLayer",
      "type": "line",
      "source": "transNetworkSource",
      "source-layer": "Trans_network",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (28, N'transNetworkBikeSource', N'transNetworkBikeSource', N'KC', N'KC', N'transNetworkBikeSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_bike/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkBusLayer",
      "type": "line",
      "source": "transNetworkBusSource",
      "source-layer": "trans_network_bus",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (29, N'transNetworkBusSource', N'transNetworkBusSource', N'KC', N'KC', N'transNetworkBusSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_bus/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkBikeLayer",
      "type": "line",
      "source": "transNetworkBikeSource",
      "source-layer": "trans_network_bike",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (30, N'transNetworkCarSource', N'transNetworkCarSource', N'KC', N'KC', N'transNetworkCarSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_car/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkCarLayer",
      "type": "line",
      "source": "transNetworkCarSource",
      "source-layer": "trans_network_car",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (31, N'transNetworkEQuestSource', N'transNetworkEQuestSource', N'KC', N'KC', N'transNetworkEQuestSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_equest/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkEQuestLayer",
      "type": "line",
      "source": "transNetworkEQuestSource",
      "source-layer": "trans_network_equest",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (32, N'transNetworkFerrySource', N'transNetworkFerrySource', N'KC', N'KC', N'transNetworkFerrySource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_ferry/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkFerryLayer",
      "type": "line",
      "source": "transNetworkFerrySource",
      "source-layer": "trans_network_ferry",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (33, N'transNetworkPedSource', N'transNetworkPedSource', N'KC', N'KC', N'transNetworkPedSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_ped/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkPedLayer",
      "type": "line",
      "source": "transNetworkPedSource",
      "source-layer": "trans_network_ped",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (35, N'transNetworkRailSource', N'transNetworkRailSource', N'KC', N'KC', N'transNetworkRailSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/trans_network_rail/{z}/{y}/{x}', 256, N'{
      "id": "transNetworkRailLayer",
      "type": "line",
      "source": "transNetworkRailSource",
      "source-layer": "trans_network_rail",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (36, N'tribalLandsSource', N'tribalLandsSource', N'KC', N'KC', N'tribalLandsSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/tribal_lands/{z}/{y}/{x}', 256, N'{
      "id": "tribalLandsLayer",
      "type": "fill",
      "source": "tribalLandsSource",
      "source-layer": "tribal_lands",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (37, N'wetlandsSource', N'wetlandsSource', N'KC', N'KC', N'wetlandsSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wetlands/{z}/{y}/{x}', 256, N'{
      "id": "wetlandsLayer",
      "type": "fill",
      "source": "wetlandsSource",
      "source-layer": "wetlands",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (38, N'wtrbdySource', N'wtrbdySource', N'KC', N'KC', N'wtrbdySource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrbdy/{z}/{y}/{x}', 256, N'{
      "id": "wtrbdyLayer",
      "type": "fill",
      "source": "wtrbdySource",
      "source-layer": "wtrbdy",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (39, N'wtrbdyConSource', N'wtrbdyConSource', N'KC', N'KC', N'wtrbdyConSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrbdy_con/{z}/{y}/{x}', 256, N'{
      "id": "wtrbdyConLayer",
      "type": "fill",
      "source": "wtrbdyConSource",
      "source-layer": "wtrbdy_con",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (41, N'wtrbdyDetSource', N'wtrbdyDetSource', N'KC', N'KC', N'wtrbdyDetSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrbdy_det/{z}/{y}/{x}', 256, N'{
      "id": "wtrbdyDetLayer",
      "type": "fill",
      "source": "wtrbdyDetSource",
      "source-layer": "wtrbdy_det",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (42, N'wtrbdyWetSource', N'wtrbdyWetSource', N'KC', N'KC', N'wtrbdyWetSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrbdy_wet/{z}/{y}/{x}', 256, N'{
      "id": "wtrbdyWetLayer",
      "type": "fill",
      "source": "wtrbdyWetSource",
      "source-layer": "wtrbdy_wet",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (43, N'wtrCrsSource', N'wtrCrsSource', N'KC', N'KC', N'wtrCrsSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrcrs/{z}/{y}/{x}', 256, N'{
      "id": "wtrCrsLayer",
      "type": "line",
      "source": "wtrCrsSource",
      "source-layer": "wtrcrs",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (44, N'wtrCrs3coSource', N'wtrCrs3coSource', N'KC', N'KC', N'wtrCrs3coSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrcrs_3co/{z}/{y}/{x}', 256, N'{
      "id": "wtrCrs3coLayer",
      "type": "line",
      "source": "wtrCrs3coSource",
      "source-layer": "wtrcrs_3co",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (45, N'wtrDstSource', N'wtrDstSource', N'KC', N'KC', N'wtrDstSource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/wtrdst/{z}/{y}/{x}', 256, N'{
      "id": "wtrDstLayer",
      "type": "fill",
      "source": "wtrDstSource",
      "source-layer": "wtrdst",
      "paint": {
        "fill-outline-color": "#FF0000",
        "fill-color": "rgba(255,0,0,0.25)"
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (46, N'boundarySource', N'boundarySource', N'KC', N'KC', N'boundarySource', 0, 8, 22, 8, 22, 1, N'v1.0/vectortiles/boundary/{z}/{y}/{x}', 256, N'{
      "id": "boundaryLayer",
      "type": "line",
      "source": "boundarySource",
      "source-layer": "boundary",
      "paint": {
        "line-opacity": 1,
        "line-color": "rgb(53, 175, 109)",
        "line-width": 1.5
      },
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
INSERT [gis].[LayerSource] ([LayerSourceId], [LayerSourceName], [LayerSourceAlias], [Jurisdiction], [Organization], [Description], [IsParcelSource], [DefaultMinZoom], [DefaultMaxZoom], [DefaultLabelMinZoom], [DefaultLabelMaxZoom], [IsVectorLayer], [DataSourceUrl], [TileSize], [DefaultMapboxLayer], [DefaultLabelMapboxLayer], [HasOfflineSupport]) VALUES (47, N'pictometrySource', N'pictometrySource', N'KC', N'KC', N'pictometrySource', 0, 14, 22, 14, 22, 0, N'v1.0/rastertiles/pictometry/{z}/{y}/{x}', 256, N'{
      "id": "pictometry",
      "type": "raster",
      "source": "pictometrySource",
      "isBaseLayer": true,
      "isHighlightable": false
    }', N'', 0)
GO
SET IDENTITY_INSERT [gis].[LayerSource] OFF
GO
INSERT [gis].[MapRendererLogicType] ([MapRendererLogicType]) VALUES (N'Area')
GO
INSERT [gis].[MapRendererLogicType] ([MapRendererLogicType]) VALUES (N'Label')
GO
INSERT [gis].[MapRendererLogicType] ([MapRendererLogicType]) VALUES (N'Parcel')
GO
INSERT [gis].[MapRendererType] ([MapRendererType]) VALUES (N'Automatic')
GO
INSERT [gis].[MapRendererType] ([MapRendererType]) VALUES (N'Class')
GO
INSERT [gis].[MapRendererType] ([MapRendererType]) VALUES (N'Simple')
GO
INSERT [gis].[MapRendererType] ([MapRendererType]) VALUES (N'Unique')
GO
ALTER TABLE [cus].[ChartTemplate] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [cus].[ChartTemplate] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition] ADD  DEFAULT ((0)) FOR [ColumnTypeLength]
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition] ADD  DEFAULT ((0)) FOR [CanBeUsedAsLookup]
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition] ADD  DEFAULT ((0)) FOR [IsEditable]
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition] ADD  DEFAULT ((0)) FOR [ForceEditLookupExpression]
GO
ALTER TABLE [cus].[CustomSearchDefinition] ADD  DEFAULT ((0)) FOR [IsDeleted]
GO
ALTER TABLE [cus].[CustomSearchDefinition] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [cus].[CustomSearchDefinition] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [cus].[CustomSearchExpression] ADD  DEFAULT ('Dataset') FOR [OwnerType]
GO
ALTER TABLE [cus].[CustomSearchExpression] ADD  DEFAULT ('T-SQL') FOR [ExpressionType]
GO
ALTER TABLE [cus].[CustomSearchExpression] ADD  DEFAULT ('ColumnExpression') FOR [ExpressionRole]
GO
ALTER TABLE [cus].[CustomSearchExpression] ADD  DEFAULT ((0)) FOR [ExecutionOrder]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ('CustomSearchDefinition') FOR [OwnerType]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT (NULL) FOR [CustomSearchDefinitionId]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT (NULL) FOR [RScriptModelId]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ('int') FOR [ParameterDataType]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ('NotRange') FOR [ParameterRangeType]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ((0)) FOR [ParameterTypeLength]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ('') FOR [ParameterDefaultValue]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ((0)) FOR [ParameterIsRequired]
GO
ALTER TABLE [cus].[CustomSearchParameter] ADD  DEFAULT ((0)) FOR [ForceEditLookupExpression]
GO
ALTER TABLE [cus].[CustomSearchValidationRule] ADD  DEFAULT ((0)) FOR [ExecutionOrder]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT (NULL) FOR [SourceDatasetId]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT (NULL) FOR [ParentFolderId]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT ((0)) FOR [TotalRows]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT ((0)) FOR [IsLocked]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT ('NotProcessed') FOR [DatasetState]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT ('NotProcessed') FOR [DatasetPostProcessState]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [cus].[Dataset] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT ('') FOR [PostProcessName]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT (NULL) FOR [ParameterValues]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT ((0)) FOR [Priority]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT ((0)) FOR [IsDirty]
GO
ALTER TABLE [cus].[DatasetPostProcess] ADD  DEFAULT ((0)) FOR [ExecutionOrder]
GO
ALTER TABLE [cus].[ExceptionPostProcessRule] ADD  DEFAULT ((0)) FOR [ExecutionOrder]
GO
ALTER TABLE [cus].[Folder] ADD  DEFAULT ('User') FOR [FolderType]
GO
ALTER TABLE [cus].[InteractiveChart] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [cus].[InteractiveChart] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [cus].[ProjectType] ADD  DEFAULT ('') FOR [ProjectTypeName]
GO
ALTER TABLE [cus].[ProjectType_CustomSearchDefinition] ADD  DEFAULT ('Population') FOR [DatasetRole]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT ((1)) FOR [VersionNumber]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT ('') FOR [ProjectName]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT ('') FOR [Comments]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT ((0)) FOR [IsLocked]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT ('') FOR [SelectedAreas]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [cus].[UserProject] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [cus].[UserProject_Dataset] ADD  DEFAULT ((0)) FOR [OwnsDataset]
GO
ALTER TABLE [cus].[UserProject_Dataset] ADD  DEFAULT ('Population') FOR [DatasetRole]
GO
ALTER TABLE [dbo].[WorkerJobQueue] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [gis].[Folder] ADD  DEFAULT ('User') FOR [FolderType]
GO
ALTER TABLE [gis].[Folder] ADD  DEFAULT ('UserMap') FOR [FolderItemType]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((0)) FOR [IsParcelSource]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((10)) FOR [DefaultMinZoom]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((16)) FOR [DefaultMaxZoom]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((10)) FOR [DefaultLabelMinZoom]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((16)) FOR [DefaultLabelMaxZoom]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((0)) FOR [TileSize]
GO
ALTER TABLE [gis].[LayerSource] ADD  DEFAULT ((0)) FOR [HasOfflineSupport]
GO
ALTER TABLE [gis].[MapRenderer] ADD  DEFAULT ((0)) FOR [IsLocked]
GO
ALTER TABLE [gis].[MapRenderer] ADD  DEFAULT ((0)) FOR [HasLabelRenderer]
GO
ALTER TABLE [gis].[MapRenderer] ADD  DEFAULT ('Parcel') FOR [MapRendererType]
GO
ALTER TABLE [gis].[MapRenderer] ADD  DEFAULT ('Simple') FOR [MapRendererLogicType]
GO
ALTER TABLE [gis].[MapRenderer] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [gis].[MapRenderer] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [gis].[UserMap] ADD  DEFAULT ((0)) FOR [IsLocked]
GO
ALTER TABLE [gis].[UserMap] ADD  DEFAULT (getdate()) FOR [CreatedTimestamp]
GO
ALTER TABLE [gis].[UserMap] ADD  DEFAULT (getdate()) FOR [LastModifiedTimestamp]
GO
ALTER TABLE [gis].[UserMapLayer] ADD  DEFAULT ((10)) FOR [MinZoomOverride]
GO
ALTER TABLE [gis].[UserMapLayer] ADD  DEFAULT ((16)) FOR [MaxZoomOverride]
GO
ALTER TABLE [gis].[UserMapLayer] ADD  DEFAULT ((10)) FOR [LabelMinZoomOverride]
GO
ALTER TABLE [gis].[UserMapLayer] ADD  DEFAULT ((16)) FOR [LabelMaxZoomOverride]
GO
ALTER TABLE [cus].[ChartTemplate]  WITH CHECK ADD  CONSTRAINT [FK_ChartTemplate_ToChartType] FOREIGN KEY([ChartType])
REFERENCES [cus].[ChartType] ([ChartType])
GO
ALTER TABLE [cus].[ChartTemplate] CHECK CONSTRAINT [FK_ChartTemplate_ToChartType]
GO
ALTER TABLE [cus].[ChartTemplate]  WITH NOCHECK ADD  CONSTRAINT [FK_ChartTemplate_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[ChartTemplate] NOCHECK CONSTRAINT [FK_ChartTemplate_ToSystemUser_CreatedBy]
GO
ALTER TABLE [cus].[ChartTemplate]  WITH NOCHECK ADD  CONSTRAINT [FK_ChartTemplate_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[ChartTemplate] NOCHECK CONSTRAINT [FK_ChartTemplate_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [cus].[CustomSearch_ChartTemplate]  WITH CHECK ADD  CONSTRAINT [FK_CustomSearch_ChartTemplate_To_ChartTemplate] FOREIGN KEY([ChartTemplateId])
REFERENCES [cus].[ChartTemplate] ([ChartTemplateId])
GO
ALTER TABLE [cus].[CustomSearch_ChartTemplate] CHECK CONSTRAINT [FK_CustomSearch_ChartTemplate_To_ChartTemplate]
GO
ALTER TABLE [cus].[CustomSearch_ChartTemplate]  WITH CHECK ADD  CONSTRAINT [FK_CustomSearch_ChartTemplate_To_CustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[CustomSearch_ChartTemplate] CHECK CONSTRAINT [FK_CustomSearch_ChartTemplate_To_CustomSearchDefinition]
GO
ALTER TABLE [cus].[CustomSearchBackendEntity]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchBackendEntity_ToCustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[CustomSearchBackendEntity] CHECK CONSTRAINT [FK_CustomSearchBackendEntity_ToCustomSearchDefinition]
GO
ALTER TABLE [cus].[CustomSearchCategory_Definition]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchCategory_Definition_ToCustomSearchCategory] FOREIGN KEY([CustomSearchCategoryId])
REFERENCES [cus].[CustomSearchCategory] ([CustomSearchCategoryId])
GO
ALTER TABLE [cus].[CustomSearchCategory_Definition] CHECK CONSTRAINT [FK_CustomSearchCategory_Definition_ToCustomSearchCategory]
GO
ALTER TABLE [cus].[CustomSearchCategory_Definition]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchCategory_Definition_ToCustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[CustomSearchCategory_Definition] CHECK CONSTRAINT [FK_CustomSearchCategory_Definition_ToCustomSearchDefinition]
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchColumnDefinition_ToColumnType] FOREIGN KEY([ColumnType])
REFERENCES [cus].[DataType] ([DataType])
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition] CHECK CONSTRAINT [FK_CustomSearchColumnDefinition_ToColumnType]
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchColumnDefinition_ToCustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[CustomSearchColumnDefinition] CHECK CONSTRAINT [FK_CustomSearchColumnDefinition_ToCustomSearchDefinition]
GO
ALTER TABLE [cus].[CustomSearchDefinition]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchDefinition_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[CustomSearchDefinition] NOCHECK CONSTRAINT [FK_CustomSearchDefinition_ToSystemUser_CreatedBy]
GO
ALTER TABLE [cus].[CustomSearchDefinition]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchDefinition_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[CustomSearchDefinition] NOCHECK CONSTRAINT [FK_CustomSearchDefinition_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH CHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ChartTemplate] FOREIGN KEY([ChartTemplateId])
REFERENCES [cus].[ChartTemplate] ([ChartTemplateId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ChartTemplate]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_CustomSearchColumnDefinition] FOREIGN KEY([CustomSearchColumnDefinitionId])
REFERENCES [cus].[CustomSearchColumnDefinition] ([CustomSearchColumnDefinitionId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_CustomSearchColumnDefinition]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_CustomSearchParameter] FOREIGN KEY([CustomSearchParameterId])
REFERENCES [cus].[CustomSearchParameter] ([CustomSearchParameterId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_CustomSearchParameter]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_CustomSearchValidationRule] FOREIGN KEY([CustomSearchValidationRuleId])
REFERENCES [cus].[CustomSearchValidationRule] ([CustomSearchValidationRuleId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_CustomSearchValidationRule]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_DatasetPostProcess] FOREIGN KEY([DatasetPostProcessId])
REFERENCES [cus].[DatasetPostProcess] ([DatasetPostProcessId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_DatasetPostProcess]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ExceptionPostProcessRule] FOREIGN KEY([ExceptionPostProcessRuleId])
REFERENCES [cus].[ExceptionPostProcessRule] ([ExceptionPostProcessRuleId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ExceptionPostProcessRule]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToDataset] FOREIGN KEY([DatasetID])
REFERENCES [cus].[Dataset] ([DatasetId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToDataset]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToExpressionRole] FOREIGN KEY([ExpressionRole])
REFERENCES [cus].[ExpressionRole] ([ExpressionRole])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToExpressionRole]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToExpressionType] FOREIGN KEY([ExpressionType])
REFERENCES [cus].[ExpressionType] ([ExpressionType])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToExpressionType]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToInteractiveChart] FOREIGN KEY([DatasetChartId])
REFERENCES [cus].[InteractiveChart] ([InteractiveChartId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToInteractiveChart]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToOwnerType] FOREIGN KEY([OwnerType])
REFERENCES [cus].[OwnerType] ([OwnerType])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToOwnerType]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToProjectType] FOREIGN KEY([ProjectTypeId])
REFERENCES [cus].[ProjectType] ([ProjectTypeId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToProjectType]
GO
ALTER TABLE [cus].[CustomSearchExpression]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchExpression_ToRScriptModel] FOREIGN KEY([RScriptModelId])
REFERENCES [cus].[RScriptModel] ([RScriptModelId])
GO
ALTER TABLE [cus].[CustomSearchExpression] CHECK CONSTRAINT [FK_CustomSearchExpression_ToRScriptModel]
GO
ALTER TABLE [cus].[CustomSearchParameter]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchParameter_ToCustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[CustomSearchParameter] CHECK CONSTRAINT [FK_CustomSearchParameter_ToCustomSearchDefinition]
GO
ALTER TABLE [cus].[CustomSearchParameter]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchParameter_ToDataType] FOREIGN KEY([ParameterDataType])
REFERENCES [cus].[DataType] ([DataType])
GO
ALTER TABLE [cus].[CustomSearchParameter] CHECK CONSTRAINT [FK_CustomSearchParameter_ToDataType]
GO
ALTER TABLE [cus].[CustomSearchParameter]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchParameter_ToOwnerType] FOREIGN KEY([OwnerType])
REFERENCES [cus].[OwnerType] ([OwnerType])
GO
ALTER TABLE [cus].[CustomSearchParameter] CHECK CONSTRAINT [FK_CustomSearchParameter_ToOwnerType]
GO
ALTER TABLE [cus].[CustomSearchParameter]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchParameter_ToRangeType] FOREIGN KEY([ParameterRangeType])
REFERENCES [cus].[RangeType] ([RangeType])
GO
ALTER TABLE [cus].[CustomSearchParameter] CHECK CONSTRAINT [FK_CustomSearchParameter_ToRangeType]
GO
ALTER TABLE [cus].[CustomSearchParameter]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchParameter_ToRScriptModel] FOREIGN KEY([RScriptModelId])
REFERENCES [cus].[RScriptModel] ([RScriptModelId])
GO
ALTER TABLE [cus].[CustomSearchParameter] CHECK CONSTRAINT [FK_CustomSearchParameter_ToRScriptModel]
GO
ALTER TABLE [cus].[CustomSearchValidationRule]  WITH NOCHECK ADD  CONSTRAINT [FK_CustomSearchValidationRule_ToCustomSearch] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[CustomSearchValidationRule] CHECK CONSTRAINT [FK_CustomSearchValidationRule_ToCustomSearch]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_Definition_ToCustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_Definition_ToCustomSearchDefinition]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToDataset] FOREIGN KEY([SourceDatasetId])
REFERENCES [cus].[Dataset] ([DatasetId])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_ToDataset]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToDatasetPostProcessState] FOREIGN KEY([DatasetPostProcessState])
REFERENCES [cus].[DatasetPostProcessState] ([DatasetPostProcessState])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_ToDatasetPostProcessState]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToDatasetState] FOREIGN KEY([DatasetState])
REFERENCES [cus].[DatasetState] ([DatasetState])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_ToDatasetState]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToDbLockType] FOREIGN KEY([DbLockType])
REFERENCES [cus].[DbLockType] ([DbLockType])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_ToDbLockType]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToParentFolderId] FOREIGN KEY([ParentFolderId])
REFERENCES [cus].[Folder] ([FolderId])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_ToParentFolderId]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[Dataset] NOCHECK CONSTRAINT [FK_Dataset_ToSystemUser_CreatedBy]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToSystemUser_LastExecutedBy] FOREIGN KEY([LastExecutedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[Dataset] CHECK CONSTRAINT [FK_Dataset_ToSystemUser_LastExecutedBy]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[Dataset] NOCHECK CONSTRAINT [FK_Dataset_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [cus].[Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_Dataset_ToSystemUser_UserId] FOREIGN KEY([UserId])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[Dataset] NOCHECK CONSTRAINT [FK_Dataset_ToSystemUser_UserId]
GO
ALTER TABLE [cus].[DatasetPostProcess]  WITH NOCHECK ADD  CONSTRAINT [FK_DatasetPostProcess_ToDataset] FOREIGN KEY([DatasetId])
REFERENCES [cus].[Dataset] ([DatasetId])
GO
ALTER TABLE [cus].[DatasetPostProcess] CHECK CONSTRAINT [FK_DatasetPostProcess_ToDataset]
GO
ALTER TABLE [cus].[DatasetPostProcess]  WITH NOCHECK ADD  CONSTRAINT [FK_DatasetPostProcess_ToRScriptModel] FOREIGN KEY([RScriptModelId])
REFERENCES [cus].[RScriptModel] ([RScriptModelId])
GO
ALTER TABLE [cus].[DatasetPostProcess] CHECK CONSTRAINT [FK_DatasetPostProcess_ToRScriptModel]
GO
ALTER TABLE [cus].[DatasetPostProcess]  WITH NOCHECK ADD  CONSTRAINT [FK_DatasetPostProcess_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[DatasetPostProcess] NOCHECK CONSTRAINT [FK_DatasetPostProcess_ToSystemUser_CreatedBy]
GO
ALTER TABLE [cus].[DatasetPostProcess]  WITH NOCHECK ADD  CONSTRAINT [FK_DatasetPostProcess_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[DatasetPostProcess] NOCHECK CONSTRAINT [FK_DatasetPostProcess_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [cus].[DatasetUserClientState]  WITH NOCHECK ADD  CONSTRAINT [FK_DatasetUserClientState_ToDataset] FOREIGN KEY([DatasetId])
REFERENCES [cus].[Dataset] ([DatasetId])
GO
ALTER TABLE [cus].[DatasetUserClientState] CHECK CONSTRAINT [FK_DatasetUserClientState_ToDataset]
GO
ALTER TABLE [cus].[ExceptionPostProcessRule]  WITH NOCHECK ADD  CONSTRAINT [FK_ExceptionPostProcessRule_ToDatasetPostProcess] FOREIGN KEY([DatasetPostProcessId])
REFERENCES [cus].[DatasetPostProcess] ([DatasetPostProcessId])
GO
ALTER TABLE [cus].[ExceptionPostProcessRule] CHECK CONSTRAINT [FK_ExceptionPostProcessRule_ToDatasetPostProcess]
GO
ALTER TABLE [cus].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToFolder] FOREIGN KEY([ParentFolderId])
REFERENCES [cus].[Folder] ([FolderId])
GO
ALTER TABLE [cus].[Folder] CHECK CONSTRAINT [FK_Folder_ToFolder]
GO
ALTER TABLE [cus].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToFolderType] FOREIGN KEY([FolderType])
REFERENCES [cus].[FolderType] ([FolderType])
GO
ALTER TABLE [cus].[Folder] CHECK CONSTRAINT [FK_Folder_ToFolderType]
GO
ALTER TABLE [cus].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToSystemUser] FOREIGN KEY([UserId])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[Folder] NOCHECK CONSTRAINT [FK_Folder_ToSystemUser]
GO
ALTER TABLE [cus].[InteractiveChart]  WITH NOCHECK ADD  CONSTRAINT [FK_InteractiveChart_ToChartType] FOREIGN KEY([ChartType])
REFERENCES [cus].[ChartType] ([ChartType])
GO
ALTER TABLE [cus].[InteractiveChart] CHECK CONSTRAINT [FK_InteractiveChart_ToChartType]
GO
ALTER TABLE [cus].[InteractiveChart]  WITH NOCHECK ADD  CONSTRAINT [FK_InteractiveChart_ToDataset] FOREIGN KEY([DatasetId])
REFERENCES [cus].[Dataset] ([DatasetId])
GO
ALTER TABLE [cus].[InteractiveChart] CHECK CONSTRAINT [FK_InteractiveChart_ToDataset]
GO
ALTER TABLE [cus].[InteractiveChart]  WITH NOCHECK ADD  CONSTRAINT [FK_InteractiveChat_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[InteractiveChart] NOCHECK CONSTRAINT [FK_InteractiveChat_ToSystemUser_CreatedBy]
GO
ALTER TABLE [cus].[InteractiveChart]  WITH NOCHECK ADD  CONSTRAINT [FK_InteractiveChat_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[InteractiveChart] NOCHECK CONSTRAINT [FK_InteractiveChat_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [cus].[ProjectType_CustomSearchDefinition]  WITH NOCHECK ADD  CONSTRAINT [FK_ProjectType_CustomSearchDefinition_ToCustomSearchDefinition] FOREIGN KEY([CustomSearchDefinitionId])
REFERENCES [cus].[CustomSearchDefinition] ([CustomSearchDefinitionId])
GO
ALTER TABLE [cus].[ProjectType_CustomSearchDefinition] CHECK CONSTRAINT [FK_ProjectType_CustomSearchDefinition_ToCustomSearchDefinition]
GO
ALTER TABLE [cus].[ProjectType_CustomSearchDefinition]  WITH NOCHECK ADD  CONSTRAINT [FK_ProjectType_CustomSearchDefinition_ToProjectType] FOREIGN KEY([ProjectTypeId])
REFERENCES [cus].[ProjectType] ([ProjectTypeId])
GO
ALTER TABLE [cus].[ProjectType_CustomSearchDefinition] CHECK CONSTRAINT [FK_ProjectType_CustomSearchDefinition_ToProjectType]
GO
ALTER TABLE [cus].[UserProject]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_ToProjectType] FOREIGN KEY([ProjectTypeId])
REFERENCES [cus].[ProjectType] ([ProjectTypeId])
GO
ALTER TABLE [cus].[UserProject] CHECK CONSTRAINT [FK_UserProject_ToProjectType]
GO
ALTER TABLE [cus].[UserProject]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[UserProject] NOCHECK CONSTRAINT [FK_UserProject_ToSystemUser_CreatedBy]
GO
ALTER TABLE [cus].[UserProject]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[UserProject] NOCHECK CONSTRAINT [FK_UserProject_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [cus].[UserProject]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_ToSystemUser_UserId] FOREIGN KEY([UserId])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [cus].[UserProject] NOCHECK CONSTRAINT [FK_UserProject_ToSystemUser_UserId]
GO
ALTER TABLE [cus].[UserProject]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_ToUserProject] FOREIGN KEY([RootVersionUserProjectId])
REFERENCES [cus].[UserProject] ([UserProjectId])
GO
ALTER TABLE [cus].[UserProject] CHECK CONSTRAINT [FK_UserProject_ToUserProject]
GO
ALTER TABLE [cus].[UserProject_Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_Dataset_ToDataset] FOREIGN KEY([DatasetId])
REFERENCES [cus].[Dataset] ([DatasetId])
GO
ALTER TABLE [cus].[UserProject_Dataset] CHECK CONSTRAINT [FK_UserProject_Dataset_ToDataset]
GO
ALTER TABLE [cus].[UserProject_Dataset]  WITH NOCHECK ADD  CONSTRAINT [FK_UserProject_Dataset_ToUserProject] FOREIGN KEY([UserProjectId])
REFERENCES [cus].[UserProject] ([UserProjectId])
GO
ALTER TABLE [cus].[UserProject_Dataset] CHECK CONSTRAINT [FK_UserProject_Dataset_ToUserProject]
GO
ALTER TABLE [gis].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToFolder] FOREIGN KEY([ParentFolderId])
REFERENCES [gis].[Folder] ([FolderId])
GO
ALTER TABLE [gis].[Folder] CHECK CONSTRAINT [FK_Folder_ToFolder]
GO
ALTER TABLE [gis].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToFolderItemType] FOREIGN KEY([FolderItemType])
REFERENCES [gis].[FolderItemType] ([FolderItemType])
GO
ALTER TABLE [gis].[Folder] CHECK CONSTRAINT [FK_Folder_ToFolderItemType]
GO
ALTER TABLE [gis].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToFolderType] FOREIGN KEY([FolderType])
REFERENCES [gis].[FolderType] ([FolderType])
GO
ALTER TABLE [gis].[Folder] CHECK CONSTRAINT [FK_Folder_ToFolderType]
GO
ALTER TABLE [gis].[Folder]  WITH NOCHECK ADD  CONSTRAINT [FK_Folder_ToSystemUser] FOREIGN KEY([UserId])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [gis].[Folder] NOCHECK CONSTRAINT [FK_Folder_ToSystemUser]
GO
ALTER TABLE [gis].[MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRenderer_ToFolder] FOREIGN KEY([ParentFolderId])
REFERENCES [gis].[Folder] ([FolderId])
GO
ALTER TABLE [gis].[MapRenderer] CHECK CONSTRAINT [FK_MapRenderer_ToFolder]
GO
ALTER TABLE [gis].[MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRenderer_ToMapRendererLogicType] FOREIGN KEY([MapRendererLogicType])
REFERENCES [gis].[MapRendererLogicType] ([MapRendererLogicType])
GO
ALTER TABLE [gis].[MapRenderer] CHECK CONSTRAINT [FK_MapRenderer_ToMapRendererLogicType]
GO
ALTER TABLE [gis].[MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRenderer_ToMapRendererType] FOREIGN KEY([MapRendererType])
REFERENCES [gis].[MapRendererType] ([MapRendererType])
GO
ALTER TABLE [gis].[MapRenderer] CHECK CONSTRAINT [FK_MapRenderer_ToMapRendererType]
GO
ALTER TABLE [gis].[MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRenderer_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [gis].[MapRenderer] NOCHECK CONSTRAINT [FK_MapRenderer_ToSystemUser_CreatedBy]
GO
ALTER TABLE [gis].[MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRenderer_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [gis].[MapRenderer] NOCHECK CONSTRAINT [FK_MapRenderer_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [gis].[MapRendererCategory_MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRendererCategory_MapRenderer_ToMapRenderer] FOREIGN KEY([MapRendererId])
REFERENCES [gis].[MapRenderer] ([MapRendererId])
GO
ALTER TABLE [gis].[MapRendererCategory_MapRenderer] CHECK CONSTRAINT [FK_MapRendererCategory_MapRenderer_ToMapRenderer]
GO
ALTER TABLE [gis].[MapRendererCategory_MapRenderer]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRendererCategory_MapRenderer_ToMapRendererCategory] FOREIGN KEY([MapRendererCategoryId])
REFERENCES [gis].[MapRendererCategory] ([MapRendererCategoryId])
GO
ALTER TABLE [gis].[MapRendererCategory_MapRenderer] CHECK CONSTRAINT [FK_MapRendererCategory_MapRenderer_ToMapRendererCategory]
GO
ALTER TABLE [gis].[MapRendererUserSelection]  WITH NOCHECK ADD  CONSTRAINT [FK_MapRendererUserSelection_ToMapRenderer] FOREIGN KEY([MapRendererId])
REFERENCES [gis].[MapRenderer] ([MapRendererId])
GO
ALTER TABLE [gis].[MapRendererUserSelection] CHECK CONSTRAINT [FK_MapRendererUserSelection_ToMapRenderer]
GO
ALTER TABLE [gis].[UserMap]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMap_ToFolder] FOREIGN KEY([ParentFolderId])
REFERENCES [gis].[Folder] ([FolderId])
GO
ALTER TABLE [gis].[UserMap] CHECK CONSTRAINT [FK_UserMap_ToFolder]
GO
ALTER TABLE [gis].[UserMap]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMap_ToSystemUser_CreatedBy] FOREIGN KEY([CreatedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [gis].[UserMap] NOCHECK CONSTRAINT [FK_UserMap_ToSystemUser_CreatedBy]
GO
ALTER TABLE [gis].[UserMap]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMap_ToSystemUser_LastModifiedBy] FOREIGN KEY([LastModifiedBy])
REFERENCES [dynamics].[systemuser] ([systemuserid])
GO
ALTER TABLE [gis].[UserMap] NOCHECK CONSTRAINT [FK_UserMap_ToSystemUser_LastModifiedBy]
GO
ALTER TABLE [gis].[UserMapCategory_UserMap]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMapCategory_UserMap_ToUserMap] FOREIGN KEY([UserMapId])
REFERENCES [gis].[UserMap] ([UserMapId])
GO
ALTER TABLE [gis].[UserMapCategory_UserMap] CHECK CONSTRAINT [FK_UserMapCategory_UserMap_ToUserMap]
GO
ALTER TABLE [gis].[UserMapCategory_UserMap]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMapCategory_UserMap_ToUserMapCategory] FOREIGN KEY([UserMapCategoryId])
REFERENCES [gis].[UserMapCategory] ([UserMapCategoryId])
GO
ALTER TABLE [gis].[UserMapCategory_UserMap] CHECK CONSTRAINT [FK_UserMapCategory_UserMap_ToUserMapCategory]
GO
ALTER TABLE [gis].[UserMapLayer]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMapLayer_ToLayerSource] FOREIGN KEY([LayerSourceId])
REFERENCES [gis].[LayerSource] ([LayerSourceId])
GO
ALTER TABLE [gis].[UserMapLayer] CHECK CONSTRAINT [FK_UserMapLayer_ToLayerSource]
GO
ALTER TABLE [gis].[UserMapLayer]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMapLayer_ToUserMap] FOREIGN KEY([UserMapId])
REFERENCES [gis].[UserMap] ([UserMapId])
GO
ALTER TABLE [gis].[UserMapLayer] CHECK CONSTRAINT [FK_UserMapLayer_ToUserMap]
GO
ALTER TABLE [gis].[UserMapSelection]  WITH NOCHECK ADD  CONSTRAINT [FK_UserMapSelection_ToUserMap] FOREIGN KEY([UserMapId])
REFERENCES [gis].[UserMap] ([UserMapId])
GO
ALTER TABLE [gis].[UserMapSelection] CHECK CONSTRAINT [FK_UserMapSelection_ToUserMap]
GO
/****** Object:  StoredProcedure [cus].[SP_GetAlterDatasetLock]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_GetAlterDatasetLock')
	DROP PROCEDURE cus.SP_GetAlterDatasetLock
GO
CREATE PROCEDURE [cus].[SP_GetAlterDatasetLock]
	@datasetId NVARCHAR(256),
	@userId NVARCHAR(256),
	@lockingJobId INT

AS
	set nocount on;

	DECLARE @resultDatasetId UNIQUEIDENTIFIER = NULL;
	DECLARE @previousPostProcessState NVARCHAR(256) = NULL;

	WITH cte AS (
		SELECT TOP(1) * 
		FROM [cus].[Dataset] AS ds WITH (rowlock, readpast)
		WHERE (([DatasetState] = 'Processed') AND ([DatasetPostProcessState] != 'Processing') AND ([DatasetId] = @datasetId)))
	update cte SET 		
		@resultDatasetId = [cte].[DatasetId],
		@previousPostProcessState = [cte].[DatasetPostProcessState],
		DatasetPostProcessState = 'Processing',
		LockingJobId = @lockingJobId,
		LastModifiedTimestamp = GETUTCDATE(),
		LastModifiedBy = userId;

SELECT [DatasetId]
		,[CustomSearchDefinitionId]
		,[UserId]
		,[ParentFolderId]
		,[DatasetName]
		,[ParameterValues]
		,[GeneratedTableName]
		,[GenerateSchemaElapsedMs]
		,[ExecuteStoreProcedureElapsedMs]
		,[IsLocked]
		,[CreatedTimestamp]
		,[DatasetClientState]
		,[DataSetState]
		,[GenerateIndexesElapsedMs]
		,[TotalRows]
		,[LastModifiedTimestamp]
		,[CreatedBy]
		,[LastModifiedBy]
		,[LastExecutionTimestamp]
		,@previousPostProcessState as DataSetPostProcessState
		,[LockingJobId]
	FROM [cus].[Dataset]
	WHERE [DatasetId] = @DatasetId
GO
/****** Object:  StoredProcedure [cus].[SP_GetAlterDatasetLockV2]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_GetAlterDatasetLockV2')
	DROP PROCEDURE cus.SP_GetAlterDatasetLockV2
GO

CREATE PROCEDURE [cus].[SP_GetAlterDatasetLockV2]
	@datasetId NVARCHAR(256),
    @newPostProcessState NVARCHAR(256),
    @newState NVARCHAR(256),
    @isRootLock bit,
	@userId NVARCHAR(256),
	@lockingJobId INT

AS
	set nocount on;

	DECLARE @resultDatasetId UNIQUEIDENTIFIER = NULL;
	DECLARE @previousPostProcessState NVARCHAR(256) = NULL;
    DECLARE @previousDatasetState NVARCHAR(256) = NULL;
    declare @parentDatasetId NVARCHAR(256)

    SELECT @parentDatasetId = SourceDataSetId from [cus].[Dataset] where ([DatasetId] = @datasetId);

    IF (@isRootLock != 0)
    BEGIN
        IF (@parentDatasetId IS NULL)
        BEGIN
			WITH cte AS (
				SELECT TOP(1) * 
				FROM (
					SELECT dataset.*, unlockedDataset.UnlockedDatasetId, unlockedDataset.unlockedDatasetCount
					FROM 
						(SELECT *, count(datasetId) Over (Partition by ParentFolderId) as datasetCount
							FROM [cus].[Dataset] WITH (rowlock, readpast)
							WHERE ([DatasetId] = @datasetId) or [SourceDatasetId] = @datasetId) dataset 
					LEFT JOIN 
						(SELECT DatasetId as UnlockedDatasetId, count(datasetId) Over (Partition by ParentFolderId) as unlockedDatasetCount
							FROM [cus].[Dataset] WITH (rowlock, readpast)
							WHERE (([DatasetId] = @datasetId or [SourceDatasetId] = @datasetId) and [DbLockType] IS NULL)) unlockedDataset
					ON dataset.DatasetId = unlockedDataset.UnlockedDatasetId
				) datasetWithLockInfo
				WHERE ((datasetCount = unlockedDatasetCount) AND ([DatasetId] = @datasetId)))
			update cte SET 		
				@resultDatasetId = [cte].[DatasetId],
				@previousPostProcessState = [cte].[DatasetPostProcessState],
				@previousDatasetState = [cte].[DatasetState],
				DatasetPostProcessState = @newPostProcessState,
				DatasetState = @newState,
				DbLockType = 'RootLock',
				LockingJobId = @lockingJobId,        
				LastModifiedTimestamp = GETUTCDATE(),
				LastModifiedBy = userId;
        END
    END
    ELSE
    BEGIN
        WITH cte AS (
	    SELECT TOP(1) * 
		   FROM (
			    SELECT dataset.*, unlockedDataset.UnlockedDatasetId, unlockedDataset.unlockedDatasetCount
			    FROM 
				    (SELECT *, count(datasetId) Over (Partition by ParentFolderId) as datasetCount
				    FROM [cus].[Dataset] WITH (rowlock, readpast)
				    WHERE ([DatasetId] = @datasetId) or [DatasetId] = @parentDatasetId) dataset
			    LEFT JOIN 
				    (SELECT DatasetId as UnlockedDatasetId, count(datasetId) Over (Partition by ParentFolderId) as unlockedDatasetCount
				    FROM [cus].[Dataset] WITH (rowlock, readpast)
				    WHERE (([DatasetId] = @datasetId and [DbLockType] IS NULL) or ([DatasetId] = @parentDatasetId  and ISNULL([DbLockType], '') != 'RootLock'))) unlockedDataset
			    ON dataset.DatasetId = unlockedDataset.UnlockedDatasetId
			) datasetWithLockInfo
			WHERE ((datasetCount = unlockedDatasetCount) AND ([DatasetId] = @datasetId)))
	    update cte SET 		
		    @resultDatasetId = [cte].[DatasetId],
		    @previousPostProcessState = [cte].[DatasetPostProcessState],
            @previousDatasetState = [cte].[DatasetState],
		    DatasetPostProcessState = @newPostProcessState,
            DatasetState = @newState,
            DbLockType = 'Lock',
		    LockingJobId = @lockingJobId,        
		    LastModifiedTimestamp = GETUTCDATE(),
		    LastModifiedBy = userId;
    END	

	SELECT [DatasetId]
      ,[CustomSearchDefinitionId]
      ,[UserId]
      ,[ParentFolderId]
      ,[DatasetName]
      ,[ParameterValues]
      ,[GeneratedTableName]
      ,[GenerateSchemaElapsedMs]
      ,[ExecuteStoreProcedureElapsedMs]
      ,[IsLocked]
      ,[CreatedTimestamp]
      ,[DatasetClientState]
      ,@previousDatasetState as DataSetState
      ,[GenerateIndexesElapsedMs]
      ,[TotalRows]
      ,[LastModifiedTimestamp]
      ,[CreatedBy]
      ,[LastModifiedBy]
      ,[LastExecutionTimestamp]
      ,@previousPostProcessState as DataSetPostProcessState
      ,[LockingJobId]
	  ,[SourceDatasetId]
	  ,[DbLockType]
	  ,[Comments]
	  ,[LastExecutedBy]
    FROM [cus].[Dataset]
    WHERE [DatasetId] = @resultDatasetId
GO
/****** Object:  StoredProcedure [cus].[SP_GetDatasetView]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_GetDatasetView')
	DROP PROCEDURE cus.[SP_GetDatasetView]
GO

CREATE PROCEDURE [cus].[SP_GetDatasetView]
(
    @DatasetId NVARCHAR(36)
)
AS
BEGIN
    SET NOCOUNT ON

	DECLARE @TableName NVARCHAR(4000)
	DECLARE @ViewName NVARCHAR(4000)
	SELECT @TableName = GeneratedTableName FROM [cus].[Dataset] WHERE DatasetId = @DatasetId
	
	SET @ViewName = @TableName
	IF @ViewName IS NOT NULL 	   
	BEGIN
		SET @ViewName = (Concat(@TableName, '_PostProcess_View'))
		IF NOT EXISTS(select * FROM sys.views where name = @ViewName)
		BEGIN
			SET @ViewName = Concat(@TableName, '_View')
			IF NOT EXISTS(select * FROM sys.views where name = @ViewName)
			BEGIN 
				SET @ViewName = @TableName
			END
		END		
	END		

	SELECT @ViewName as ResolvedViewName
END
GO
/****** Object:  StoredProcedure [cus].[SP_GetQuantileBreaks]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_GetQuantileBreaks')
	DROP PROCEDURE cus.[SP_GetQuantileBreaks]
GO

CREATE PROCEDURE [cus].[SP_GetQuantileBreaks]
(
    @DatasetView NVARCHAR(MAX),
	@ColumnName NVARCHAR(MAX),
	@EmptyFilter NVARCHAR(MAX),
	@BreakCount INT	
)
AS
BEGIN
    SET NOCOUNT ON

	DECLARE @SqlStatement NVARCHAR(MAX)
	 
	SET @SqlStatement = 'SELECT (NTILE(' + CAST(@BreakCount AS NVARCHAR) + ') OVER(ORDER BY ' + @ColumnName + ' ASC)) AS ClassNumber, ' + @ColumnName + ' FROM ' + @DatasetView  	
	IF ISNULL(@EmptyFilter, '') != ''
	BEGIN
		SET @SqlStatement = @SqlStatement + ' WHERE ' + @EmptyFilter
	END
	SET @SqlStatement = 'SELECT ClassNumber, MIN(' + @ColumnName + ') as MinValue, MAX(' + @ColumnName + ') as MaxValue FROM (' + @SqlStatement + ') detail GROUP BY ClassNumber'
	EXECUTE sp_executesql @SqlStatement
END
GO
/****** Object:  StoredProcedure [cus].[SP_ReleaseAlterDatasetLock]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_ReleaseAlterDatasetLock')
	DROP PROCEDURE cus.[SP_ReleaseAlterDatasetLock]
GO

CREATE PROCEDURE [cus].[SP_ReleaseAlterDatasetLock]
	@datasetId NVARCHAR(256),
    @newPostProcessState NVARCHAR(256),
    @userId NVARCHAR(256)
AS
	set nocount on;

	WITH cte AS (
		SELECT TOP(1) * 
		FROM [cus].[Dataset] AS ds WITH (rowlock, readpast)
		WHERE (([DatasetPostProcessState] = 'Processing') AND ([DatasetId] = @datasetId)))
	update cte SET 				
		DatasetPostProcessState = @newPostProcessState,
		LockingJobId = NULL,
		LastModifiedTimestamp = GETUTCDATE(),
		LastModifiedBy = userId;

SELECT *
    FROM [cus].[Dataset]
    WHERE [DatasetId] = @DatasetId
GO
/****** Object:  StoredProcedure [cus].[SP_ReleaseAlterDatasetLockV2]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_ReleaseAlterDatasetLockV2')
	DROP PROCEDURE cus.[SP_ReleaseAlterDatasetLockV2]
GO

CREATE PROCEDURE [cus].[SP_ReleaseAlterDatasetLockV2]
	@datasetId NVARCHAR(256),
    @newPostProcessState NVARCHAR(256),
	@newState NVARCHAR(256),
    @userId NVARCHAR(256)
AS
	set nocount on;

	WITH cte AS (
		SELECT TOP(1) * 
		FROM [cus].[Dataset] AS ds WITH (rowlock, readpast)
		WHERE (([DBLockType] IS NOT NULL) AND ([DatasetId] = @datasetId)))
	update cte SET 				
		DatasetPostProcessState = @newPostProcessState,
		DatasetState = @newState,
		DBLockType = NULL,
		LockingJobId = NULL,
		LastModifiedTimestamp = GETUTCDATE(),
		LastModifiedBy = userId;

SELECT *
    FROM [cus].[Dataset]
    WHERE [DatasetId] = @DatasetId
GO
/****** Object:  StoredProcedure [cus].[SP_TestAlterDatasetLock]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_TestAlterDatasetLock')
	DROP PROCEDURE cus.[SP_TestAlterDatasetLock]
GO

CREATE PROCEDURE [cus].[SP_TestAlterDatasetLock]
	@datasetId NVARCHAR(256),
    @newPostProcessState NVARCHAR(256),
    @newState NVARCHAR(256),
    @isRootLock bit,
	@userId NVARCHAR(256),
	@lockingJobId INT

AS
	set nocount on;

	DECLARE @resultDatasetId UNIQUEIDENTIFIER = NULL;
	DECLARE @previousPostProcessState NVARCHAR(256) = NULL;
    DECLARE @previousDatasetState NVARCHAR(256) = NULL;
    declare @parentDatasetId NVARCHAR(256)

    SELECT @parentDatasetId = SourceDataSetId from [cus].[Dataset] where ([DatasetId] = @datasetId);

    IF (@isRootLock != 0)
    BEGIN
        IF (@parentDatasetId IS NULL)
        BEGIN
			WITH cte AS (
				SELECT TOP(1) * 
				FROM (
					SELECT dataset.*, unlockedDataset.UnlockedDatasetId, unlockedDataset.unlockedDatasetCount
					FROM 
						(SELECT *, count(datasetId) Over (Partition by ParentFolderId) as datasetCount
							FROM [cus].[Dataset] WITH (rowlock, readpast)
							WHERE ([DatasetId] = @datasetId) or [SourceDatasetId] = @datasetId) dataset 
					LEFT JOIN 
						(SELECT DatasetId as UnlockedDatasetId, count(datasetId) Over (Partition by ParentFolderId) as unlockedDatasetCount
							FROM [cus].[Dataset] WITH (rowlock, readpast)
							WHERE (([DatasetId] = @datasetId or [SourceDatasetId] = @datasetId) and [DbLockType] IS NULL)) unlockedDataset
					ON dataset.DatasetId = unlockedDataset.UnlockedDatasetId
				) datasetWithLockInfo
				WHERE ((datasetCount = unlockedDatasetCount) AND ([DatasetId] = @datasetId)))
			update cte SET 		
				@resultDatasetId = [cte].[DatasetId],
				@previousPostProcessState = [cte].[DatasetPostProcessState],
				@previousDatasetState = [cte].[DatasetState];
        END
    END
    ELSE
    BEGIN
        WITH cte AS (
	    SELECT TOP(1) * 
		   FROM (
			    SELECT dataset.*, unlockedDataset.UnlockedDatasetId, unlockedDataset.unlockedDatasetCount
			    FROM 
				    (SELECT *, count(datasetId) Over (Partition by ParentFolderId) as datasetCount
				    FROM [cus].[Dataset] WITH (rowlock, readpast)
				    WHERE ([DatasetId] = @datasetId) or [DatasetId] = @parentDatasetId) dataset
			    LEFT JOIN 
				    (SELECT DatasetId as UnlockedDatasetId, count(datasetId) Over (Partition by ParentFolderId) as unlockedDatasetCount
				    FROM [cus].[Dataset] WITH (rowlock, readpast)
				    WHERE (([DatasetId] = @datasetId and [DbLockType] IS NULL) or ([DatasetId] = @parentDatasetId  and ISNULL([DbLockType], '') != 'RootLock'))) unlockedDataset
			    ON dataset.DatasetId = unlockedDataset.UnlockedDatasetId
			) datasetWithLockInfo
			WHERE ((datasetCount = unlockedDatasetCount) AND ([DatasetId] = @datasetId)))
	    update cte SET 		
		    @resultDatasetId = [cte].[DatasetId],
		    @previousPostProcessState = [cte].[DatasetPostProcessState],
            @previousDatasetState = [cte].[DatasetState]
    END	

	SELECT [DatasetId]
      ,[CustomSearchDefinitionId]
      ,[UserId]
      ,[ParentFolderId]
      ,[DatasetName]
      ,[ParameterValues]
      ,[GeneratedTableName]
      ,[GenerateSchemaElapsedMs]
      ,[ExecuteStoreProcedureElapsedMs]
      ,[IsLocked]
      ,[CreatedTimestamp]
      ,[DatasetClientState]
      ,@previousDatasetState as DataSetState
      ,[GenerateIndexesElapsedMs]
      ,[TotalRows]
      ,[LastModifiedTimestamp]
      ,[CreatedBy]
      ,[LastModifiedBy]
      ,[LastExecutionTimestamp]
      ,@previousPostProcessState as DataSetPostProcessState
      ,[LockingJobId]
	  ,[SourceDatasetId]
	  ,[DbLockType]
	  ,[Comments]
	  ,[LastExecutedBy]
    FROM [cus].[Dataset]
    WHERE [DatasetId] = @resultDatasetId
GO
/****** Object:  StoredProcedure [dbo].[SP_PopNextWorkerJob]    Script Date: 11/4/2020 12:01:46 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SP_PopNextWorkerJob')
	DROP PROCEDURE [dbo].[SP_PopNextWorkerJob]
GO

CREATE PROCEDURE [dbo].[SP_PopNextWorkerJob]
	@queueName NVARCHAR(256)
AS
	set nocount on;

	DECLARE @JobId int = -1;

	with cte as (
		select top(1) * 
		from dbo.WorkerJobQueue as tsj with (rowlock, readpast)
		where ((QueueName = @queueName) AND ((StartedTimestamp is NULL)))
		order by CreatedTimestamp ASC)
	update cte SET 
		StartedTimestamp = GETDATE(),
		@JobId = JobId;

IF (@JobId >= 0)
	Select * from dbo.WorkerJobQueue where JobId = @JobId 
ELSE
	Select -1 as JobId, NULL AS StartedTimestamp, NULL AS CreatedTimestamp, @queueName AS QueueName, NULL as JobPayload, NULL as JobResult, NULL AS ExecutionTime, NULL as JobType, (SELECT CAST(CAST(0 AS BINARY) AS UNIQUEIDENTIFIER)) as UserId
GO


/****** Object:  Table [gis].[CA1_ANNO]    Script Date: 4/9/2019 2:52:54 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

/****** Object:  Table [gis].[CA1_ANNO]    Script Date: 07/09/2020 12:12:15 p. m. ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[gis].[PARCEL_GEOM_AREA]') AND type in (N'U'))
DROP TABLE [gis].[PARCEL_GEOM_AREA]
GO

/****** Object:  Table [gis].[PARCEL_GEOM_AREA]    Script Date: 4/9/2019 3:00:53 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [gis].[PARCEL_GEOM_AREA](
	[OBJECTID] [int] NOT NULL,
	[MAJOR] [nvarchar](6) NULL,
	[MINOR] [nvarchar](4) NULL,
	[PIN] [nvarchar](10) NULL,
	[Shape_STArea__] [numeric](38, 8) NOT NULL,
	[Shape_STLength__] [numeric](38, 8) NOT NULL,
	[Shape] [geometry] NULL,
 CONSTRAINT [PK_PARCEL_GEOM_AREA] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

CREATE SPATIAL INDEX [IX_ParcelGeomArea_Shape] ON [gis].[PARCEL_GEOM_AREA](SHAPE) WITH ( BOUNDING_BOX = (1207378.40970961, 22667.44884720, 1583803.60852664, 359488.63671145 ) ); 

GO

CREATE INDEX [IX_ParcelGeomArea_PIN] ON [gis].[PARCEL_GEOM_AREA] ([PIN])

GO


/****** Object:  Table [gis].[CA1_ANNO]    Script Date: 4/9/2019 2:52:54 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [gis].[CA1_ANNO](
	[OBJECTID] [int] NOT NULL,
	[FEATUREID] [int] NULL,
	[ZORDER] [int] NULL,
	[ANNOTATIONCLASSID] [int] NULL,
	[ELEMENT] [varbinary](max) NULL,
	[SYMBOLID] [int] NULL,
	[STATUS] [smallint] NULL,
	[TEXTSTRING] [nvarchar](255) NULL,
	[FONTNAME] [nvarchar](255) NULL,
	[FONTSIZE] [numeric](38, 8) NULL,
	[BOLD] [smallint] NULL,
	[ITALIC] [smallint] NULL,
	[UNDERLINE] [smallint] NULL,
	[VERTICALALIGNMENT] [smallint] NULL,
	[HORIZONTALALIGNMENT] [smallint] NULL,
	[ANGLE] [numeric](38, 8) NULL,
	[FONTLEADING] [numeric](38, 8) NULL,
	[WORDSPACING] [numeric](38, 8) NULL,
	[CHARACTERWIDTH] [numeric](38, 8) NULL,
	[CHARACTERSPACING] [numeric](38, 8) NULL,
	[FLIPANGLE] [numeric](38, 8) NULL,
	[OVERRIDE] [int] NULL,
	[ID] [int] NULL,
	[EDITDATE] [datetime2](7) NULL,
	[SHAPE] [geometry] NULL,
 CONSTRAINT [PK_CA1_ANNO] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

SET ANSI_PADDING OFF
GO


/****** Object:  Table [gis].[CA2_ANNO]    Script Date: 4/9/2019 2:56:40 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [gis].[CA2_ANNO](
	[OBJECTID] [int] NOT NULL,
	[FEATUREID] [int] NULL,
	[ZORDER] [int] NULL,
	[ANNOTATIONCLASSID] [int] NULL,
	[ELEMENT] [varbinary](max) NULL,
	[SYMBOLID] [int] NULL,
	[STATUS] [smallint] NULL,
	[TEXTSTRING] [nvarchar](255) NULL,
	[FONTNAME] [nvarchar](255) NULL,
	[FONTSIZE] [numeric](38, 8) NULL,
	[BOLD] [smallint] NULL,
	[ITALIC] [smallint] NULL,
	[UNDERLINE] [smallint] NULL,
	[VERTICALALIGNMENT] [smallint] NULL,
	[HORIZONTALALIGNMENT] [smallint] NULL,
	[ANGLE] [numeric](38, 8) NULL,
	[FONTLEADING] [numeric](38, 8) NULL,
	[WORDSPACING] [numeric](38, 8) NULL,
	[CHARACTERWIDTH] [numeric](38, 8) NULL,
	[CHARACTERSPACING] [numeric](38, 8) NULL,
	[FLIPANGLE] [numeric](38, 8) NULL,
	[OVERRIDE] [int] NULL,
	[ID] [int] NULL,
	[EDITDATE] [datetime2](7) NULL,
	[SHAPE] [geometry] NULL,
 CONSTRAINT [PK_CA2_ANNO] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

SET ANSI_PADDING OFF
GO


/****** Object:  Table [gis].[CA3_ANNO]    Script Date: 4/9/2019 2:57:44 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [gis].[CA3_ANNO](
	[OBJECTID] [int] NOT NULL,
	[FEATUREID] [int] NULL,
	[ZORDER] [int] NULL,
	[ANNOTATIONCLASSID] [int] NULL,
	[ELEMENT] [varbinary](max) NULL,
	[SYMBOLID] [int] NULL,
	[STATUS] [smallint] NULL,
	[TEXTSTRING] [nvarchar](255) NULL,
	[FONTNAME] [nvarchar](255) NULL,
	[FONTSIZE] [numeric](38, 8) NULL,
	[BOLD] [smallint] NULL,
	[ITALIC] [smallint] NULL,
	[UNDERLINE] [smallint] NULL,
	[VERTICALALIGNMENT] [smallint] NULL,
	[HORIZONTALALIGNMENT] [smallint] NULL,
	[ANGLE] [numeric](38, 8) NULL,
	[FONTLEADING] [numeric](38, 8) NULL,
	[WORDSPACING] [numeric](38, 8) NULL,
	[CHARACTERWIDTH] [numeric](38, 8) NULL,
	[CHARACTERSPACING] [numeric](38, 8) NULL,
	[FLIPANGLE] [numeric](38, 8) NULL,
	[OVERRIDE] [int] NULL,
	[ID] [int] NULL,
	[EDITDATE] [datetime2](7) NULL,
	[SHAPE] [geometry] NULL,
 CONSTRAINT [PK_CA3_ANNO] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

SET ANSI_PADDING OFF
GO


/****** Object:  Table [gis].[CONTOUR005_LINE]    Script Date: 4/9/2019 2:58:38 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [gis].[CONTOUR005_LINE](
	[OBJECTID] [int] NOT NULL,
	[ELEVATION] [numeric](11, 0) NOT NULL,
	[IDX_MINOR] [numeric](11, 0) NOT NULL,
	[IDX_20FT] [numeric](11, 0) NOT NULL,
	[IDX_40FT] [numeric](11, 0) NOT NULL,
	[IDX_50FT] [numeric](11, 0) NOT NULL,
	[IDX_100FT] [numeric](11, 0) NOT NULL,
	[TILE_ID] [numeric](38, 8) NOT NULL,
	[FIPS_CODE] [nvarchar](3) NULL,
	[SHAPE] [geometry] NULL,
 CONSTRAINT [PK_CONTOUR005_LINE] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

/****** Object:  Table [gis].[CONTOUR020_LINE]    Script Date: 4/9/2019 2:59:13 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [gis].[CONTOUR020_LINE](
	[OBJECTID] [int] NOT NULL,
	[ELEVATION] [numeric](38, 8) NULL,
	[SHAPE] [geometry] NULL,
 CONSTRAINT [PK_CONTOUR020_LINE] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO




/****** Object:  Table [gis].[CUT_PBRSEXCLUDEDAREA_AREA]    Script Date: 4/9/2019 3:00:18 p. m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [gis].[CUT_PBRSEXCLUDEDAREA_AREA](
	[OBJECTID] [int] NOT NULL,
	[FileNumber] [nvarchar](20) NULL,
	[PIN] [nvarchar](10) NULL,
	[OwnerName] [nvarchar](50) NULL,
	[FileNameLoc] [nvarchar](25) NULL,
	[ExcludedArea] [numeric](38, 8) NULL,
	[IsValidated] [nvarchar](5) NULL,
	[Notes] [nvarchar](500) NULL,
	[SHAPE] [geometry] NULL,
 CONSTRAINT [PK_CUT_PBRSEXCLUDEDAREA_AREA] PRIMARY KEY CLUSTERED 
(
	[OBJECTID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ChartTemplate]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ChartTemplate];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_CustomSearchColumnDefinition]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_CustomSearchColumnDefinition];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_CustomSearchParameter]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_CustomSearchParameter];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_CustomSearchValidationRule]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_CustomSearchValidationRule];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_DatasetPostProcess]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_DatasetPostProcess];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ExceptionPostProcessRule]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ExceptionPostProcessRule];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToDataset]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToDataset];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToExpressionRole]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToExpressionRole];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToExpressionType]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToExpressionType];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToInteractiveChart]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToInteractiveChart];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToOwnerType]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToOwnerType];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToProjectType]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToProjectType];


GO
PRINT N'Dropping [cus].[FK_CustomSearchExpression_ToRScriptModel]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] DROP CONSTRAINT [FK_CustomSearchExpression_ToRScriptModel];


GO
PRINT N'Starting rebuilding table [cus].[CustomSearchExpression]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [cus].[tmp_ms_xx_CustomSearchExpression] (
    [CustomSearchExpressionId]       INT              IDENTITY (1, 1) NOT NULL,
    [DatasetID]                      UNIQUEIDENTIFIER NULL,
    [CustomSearchColumnDefinitionId] INT              NULL,
    [CustomSearchParameterId]        INT              NULL,
    [DatasetPostProcessId]           INT              NULL,
    [ExceptionPostProcessRuleId]     INT              NULL,
    [CustomSearchValidationRuleId]   INT              NULL,
    [DatasetChartId]                 INT              NULL,
    [ProjectTypeId]                  INT              NULL,
    [RScriptModelId]                 INT              NULL,
    [ChartTemplateId]                INT              NULL,
    [OwnerType]                      NVARCHAR (256)   DEFAULT 'Dataset' NULL,
    [ExpressionType]                 NVARCHAR (256)   DEFAULT 'T-SQL' NOT NULL,
    [ExpressionRole]                 NVARCHAR (256)   DEFAULT 'ColumnExpression' NOT NULL,
    [Script]                         NVARCHAR (MAX)   NULL,
    [ColumnName]                     NVARCHAR (256)   NULL,
    [Category]                       NVARCHAR (256)   NULL,
    [ExpressionGroup]                NVARCHAR (256)   NULL,
    [Note]                           NVARCHAR (MAX)   NULL,
    [ExecutionOrder]                 INT              DEFAULT 0 NOT NULL,
    [ExpressionExtensions]           NVARCHAR (MAX)   NULL,
    PRIMARY KEY CLUSTERED ([CustomSearchExpressionId] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [cus].[CustomSearchExpression])
    BEGIN
        SET IDENTITY_INSERT [cus].[tmp_ms_xx_CustomSearchExpression] ON;
        INSERT INTO [cus].[tmp_ms_xx_CustomSearchExpression] ([CustomSearchExpressionId], [DatasetID], [CustomSearchColumnDefinitionId], [CustomSearchParameterId], [DatasetPostProcessId], [ExceptionPostProcessRuleId], [CustomSearchValidationRuleId], [DatasetChartId], [ProjectTypeId], [RScriptModelId], [OwnerType], [ExpressionType], [ExpressionRole], [Script], [ColumnName], [Category], [ExpressionGroup], [Note], [ExecutionOrder], [ChartTemplateId], [ExpressionExtensions])
        SELECT   [CustomSearchExpressionId],
                 [DatasetID],
                 [CustomSearchColumnDefinitionId],
                 [CustomSearchParameterId],
                 [DatasetPostProcessId],
                 [ExceptionPostProcessRuleId],
                 [CustomSearchValidationRuleId],
                 [DatasetChartId],
                 [ProjectTypeId],
                 [RScriptModelId],
                 [OwnerType],
                 [ExpressionType],
                 [ExpressionRole],
                 [Script],
                 [ColumnName],
                 [Category],
                 [ExpressionGroup],
                 [Note],
                 [ExecutionOrder],
                 [ChartTemplateId],
                 [ExpressionExtensions]
        FROM     [cus].[CustomSearchExpression]
        ORDER BY [CustomSearchExpressionId] ASC;
        SET IDENTITY_INSERT [cus].[tmp_ms_xx_CustomSearchExpression] OFF;
    END

DROP TABLE [cus].[CustomSearchExpression];

EXECUTE sp_rename N'[cus].[tmp_ms_xx_CustomSearchExpression]', N'CustomSearchExpression';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_DatasetId]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_DatasetId]
    ON [cus].[CustomSearchExpression]([DatasetID] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_CustomSearchColumnDefinitionID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_CustomSearchColumnDefinitionID]
    ON [cus].[CustomSearchExpression]([CustomSearchColumnDefinitionId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_CustomSearchParameterID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_CustomSearchParameterID]
    ON [cus].[CustomSearchExpression]([CustomSearchParameterId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_DatasetPostProcessID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_DatasetPostProcessID]
    ON [cus].[CustomSearchExpression]([DatasetPostProcessId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_ExceptionPostProcessRuleID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_ExceptionPostProcessRuleID]
    ON [cus].[CustomSearchExpression]([ExceptionPostProcessRuleId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_DatasetChartID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_DatasetChartID]
    ON [cus].[CustomSearchExpression]([DatasetChartId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_ChartTemplateID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_ChartTemplateID]
    ON [cus].[CustomSearchExpression]([ChartTemplateId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_ProjectTypeID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_ProjectTypeID]
    ON [cus].[CustomSearchExpression]([ProjectTypeId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchExpression].[IX_CustomSearchExpression_RScriptModelID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_RScriptModelID]
    ON [cus].[CustomSearchExpression]([RScriptModelId] ASC);


GO
PRINT N'Creating [cus].[ChartTemplate].[IX_ChartTemplate_ChartTitle]...';


GO
CREATE NONCLUSTERED INDEX [IX_ChartTemplate_ChartTitle]
    ON [cus].[ChartTemplate]([ChartTitle] ASC);


GO
PRINT N'Creating [cus].[CustomSearchBackendEntity].[IX_CustomSearchBackendEntity_CustomSearchDefinitionId]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchBackendEntity_CustomSearchDefinitionId]
    ON [cus].[CustomSearchBackendEntity]([CustomSearchDefinitionId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchBackendEntity].[IX_CustomSearchBackendEntity_CustomSearchKeyFieldName]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchBackendEntity_CustomSearchKeyFieldName]
    ON [cus].[CustomSearchBackendEntity]([CustomSearchKeyFieldName] ASC);


GO
PRINT N'Creating [cus].[CustomSearchCategory].[IX_CustomSearchCategory_CategoryName]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchCategory_CategoryName]
    ON [cus].[CustomSearchCategory]([CategoryName] ASC);


GO
PRINT N'Creating [cus].[CustomSearchColumnDefinition].[IX_CustomSearchColumnDefinition_ColumnType]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchColumnDefinition_ColumnType]
    ON [cus].[CustomSearchColumnDefinition]([ColumnType] ASC);


GO
PRINT N'Creating [cus].[CustomSearchColumnDefinition].[IX_CustomSearchColumnDefinition_CustomSearchDefinitionId]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchColumnDefinition_CustomSearchDefinitionId]
    ON [cus].[CustomSearchColumnDefinition]([CustomSearchDefinitionId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchDefinition].[IX_CustomSearchDefinition_CustomSearchName]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchDefinition_CustomSearchName]
    ON [cus].[CustomSearchDefinition]([CustomSearchName] ASC);


GO
PRINT N'Creating [cus].[CustomSearchDefinition].[IX_CustomSearchValidationRule_CustomSearchDefinitionId]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchValidationRule_CustomSearchDefinitionId]
    ON [cus].[CustomSearchDefinition]([CustomSearchDefinitionId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchParameter].[IX_CustomSearchParameter_CustomSearchDefinitionId]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchParameter_CustomSearchDefinitionId]
    ON [cus].[CustomSearchParameter]([CustomSearchDefinitionId] ASC);


GO
PRINT N'Creating [cus].[CustomSearchParameter].[IX_CustomSearchParameter_ParameterName]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchParameter_ParameterName]
    ON [cus].[CustomSearchParameter]([ParameterName] ASC);


GO
PRINT N'Creating [cus].[CustomSearchValidationRule].[IX_CustomSearchExpression_CustomSearchValidationRuleID]...';


GO
CREATE NONCLUSTERED INDEX [IX_CustomSearchExpression_CustomSearchValidationRuleID]
    ON [cus].[CustomSearchValidationRule]([CustomSearchValidationRuleId] ASC);


GO
PRINT N'Creating [cus].[Dataset].[IX_Dataset_CreatedTimestamp]...';


GO
CREATE NONCLUSTERED INDEX [IX_Dataset_CreatedTimestamp]
    ON [cus].[Dataset]([CreatedTimestamp] ASC);


GO
PRINT N'Creating [cus].[Dataset].[IX_Dataset_CustomSearchDefinitionId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Dataset_CustomSearchDefinitionId]
    ON [cus].[Dataset]([CustomSearchDefinitionId] ASC);


GO
PRINT N'Creating [cus].[Dataset].[IX_Dataset_DatasetName]...';


GO
CREATE NONCLUSTERED INDEX [IX_Dataset_DatasetName]
    ON [cus].[Dataset]([DatasetName] ASC);


GO
PRINT N'Creating [cus].[Dataset].[IX_Dataset_ParentFolderId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Dataset_ParentFolderId]
    ON [cus].[Dataset]([ParentFolderId] ASC);


GO
PRINT N'Creating [cus].[Dataset].[IX_Dataset_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Dataset_UserId]
    ON [cus].[Dataset]([UserId] ASC);


GO
PRINT N'Creating [cus].[DatasetPostProcess].[IX_DatasetPostProcess_PostProcessName]...';


GO
CREATE NONCLUSTERED INDEX [IX_DatasetPostProcess_PostProcessName]
    ON [cus].[DatasetPostProcess]([PostProcessName] ASC);


GO
PRINT N'Creating [cus].[DatasetPostProcess].[IX_DatasetPostProcess_PostProcessSubType]...';


GO
CREATE NONCLUSTERED INDEX [IX_DatasetPostProcess_PostProcessSubType]
    ON [cus].[DatasetPostProcess]([PostProcessSubType] ASC);


GO
PRINT N'Creating [cus].[DatasetPostProcess].[IX_DatasetPostProcess_PostProcessType]...';


GO
CREATE NONCLUSTERED INDEX [IX_DatasetPostProcess_PostProcessType]
    ON [cus].[DatasetPostProcess]([PostProcessType] ASC);


GO
PRINT N'Creating [cus].[DatasetPostProcess].[IX_DatasetPostProcess_Priority]...';


GO
CREATE NONCLUSTERED INDEX [IX_DatasetPostProcess_Priority]
    ON [cus].[DatasetPostProcess]([Priority] ASC);


GO
PRINT N'Creating [cus].[ExceptionPostProcessRule].[IX_ExceptionPostProcessRulet_DatasetPostProcessId]...';


GO
CREATE NONCLUSTERED INDEX [IX_ExceptionPostProcessRulet_DatasetPostProcessId]
    ON [cus].[ExceptionPostProcessRule]([DatasetPostProcessId] ASC);


GO
PRINT N'Creating [cus].[Folder].[IX_Folder_FolderName]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_FolderName]
    ON [cus].[Folder]([FolderName] ASC);


GO
PRINT N'Creating [cus].[Folder].[IX_Folder_ParentFolderId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_ParentFolderId]
    ON [cus].[Folder]([ParentFolderId] ASC);


GO
PRINT N'Creating [cus].[Folder].[IX_Folder_ParentFolderType]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_ParentFolderType]
    ON [cus].[Folder]([FolderType] ASC);


GO
PRINT N'Creating [cus].[Folder].[IX_Folder_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_UserId]
    ON [cus].[Folder]([UserId] ASC);


GO
PRINT N'Creating [cus].[InteractiveChart].[IX_InteractiveChart_ChartTitle]...';


GO
CREATE NONCLUSTERED INDEX [IX_InteractiveChart_ChartTitle]
    ON [cus].[InteractiveChart]([ChartTitle] ASC);


GO
PRINT N'Creating [cus].[InteractiveChart].[IX_InteractiveChart_DatasetId]...';


GO
CREATE NONCLUSTERED INDEX [IX_InteractiveChart_DatasetId]
    ON [cus].[InteractiveChart]([DatasetId] ASC);


GO
PRINT N'Creating [cus].[RScriptModel].[IX_RScriptModel_RScriptModelName]...';


GO
CREATE NONCLUSTERED INDEX [IX_RScriptModel_RScriptModelName]
    ON [cus].[RScriptModel]([RScriptModelName] ASC);


GO
PRINT N'Creating [cus].[UserProject].[IX_UserProject_CreatedTimestamp]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserProject_CreatedTimestamp]
    ON [cus].[UserProject]([CreatedTimestamp] ASC);


GO
PRINT N'Creating [cus].[UserProject].[IX_UserProject_ProjectName]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserProject_ProjectName]
    ON [cus].[UserProject]([ProjectName] ASC);


GO
PRINT N'Creating [cus].[UserProject].[IX_UserProject_ProjectTypeId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserProject_ProjectTypeId]
    ON [cus].[UserProject]([ProjectTypeId] ASC);


GO
PRINT N'Creating [cus].[UserProject].[IX_UserProject_RootVersionUserProjectId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserProject_RootVersionUserProjectId]
    ON [cus].[UserProject]([RootVersionUserProjectId] ASC);


GO
PRINT N'Creating [cus].[UserProject].[IX_UserProject_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserProject_UserId]
    ON [cus].[UserProject]([UserId] ASC);


GO
PRINT N'Creating [cus].[UserProject].[IX_UserProject_VersionNumber]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserProject_VersionNumber]
    ON [cus].[UserProject]([VersionNumber] ASC);


GO
PRINT N'Creating [dbo].[WorkerJobQueue].[IX_RWorkerJobQueue_StartedTimestamp]...';


GO
CREATE NONCLUSTERED INDEX [IX_RWorkerJobQueue_StartedTimestamp]
    ON [dbo].[WorkerJobQueue]([StartedTimestamp] ASC);


GO
PRINT N'Creating [dbo].[WorkerJobQueue].[IX_WorkerJobQueue_CreatedTimestamp]...';


GO
CREATE NONCLUSTERED INDEX [IX_WorkerJobQueue_CreatedTimestamp]
    ON [dbo].[WorkerJobQueue]([CreatedTimestamp] ASC);


GO
PRINT N'Creating [dbo].[WorkerJobQueue].[IX_WorkerJobQueue_QueueName]...';


GO
CREATE NONCLUSTERED INDEX [IX_WorkerJobQueue_QueueName]
    ON [dbo].[WorkerJobQueue]([QueueName] ASC);


GO
PRINT N'Creating [dbo].[WorkerJobQueue].[IX_WorkerJobQueue_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_WorkerJobQueue_UserId]
    ON [dbo].[WorkerJobQueue]([UserId] ASC);


GO
PRINT N'Creating [gis].[Folder].[IX_Folder_FolderName]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_FolderName]
    ON [gis].[Folder]([FolderName] ASC);


GO
PRINT N'Creating [gis].[Folder].[IX_Folder_FolderType]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_FolderType]
    ON [gis].[Folder]([FolderType] ASC);


GO
PRINT N'Creating [gis].[Folder].[IX_Folder_ParentFolderId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_ParentFolderId]
    ON [gis].[Folder]([ParentFolderId] ASC);


GO
PRINT N'Creating [gis].[Folder].[IX_Folder_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_Folder_UserId]
    ON [gis].[Folder]([UserId] ASC);


GO
PRINT N'Creating [gis].[LayerSource].[IX_LayerSource_HasOfflineSupport]...';


GO
CREATE NONCLUSTERED INDEX [IX_LayerSource_HasOfflineSupport]
    ON [gis].[LayerSource]([HasOfflineSupport] ASC);


GO
PRINT N'Creating [gis].[LayerSource].[IX_LayerSource_IsParcelSource]...';


GO
CREATE NONCLUSTERED INDEX [IX_LayerSource_IsParcelSource]
    ON [gis].[LayerSource]([IsParcelSource] ASC);


GO
PRINT N'Creating [gis].[LayerSource].[IX_LayerSource_IsVectorLayer]...';


GO
CREATE NONCLUSTERED INDEX [IX_LayerSource_IsVectorLayer]
    ON [gis].[LayerSource]([IsVectorLayer] ASC);


GO
PRINT N'Creating [gis].[LayerSource].[IX_LayerSource_LayerSourceAlias]...';


GO
CREATE NONCLUSTERED INDEX [IX_LayerSource_LayerSourceAlias]
    ON [gis].[LayerSource]([LayerSourceAlias] ASC);


GO
PRINT N'Creating [gis].[LayerSource].[IX_LayerSource_LayerSourceName]...';


GO
CREATE NONCLUSTERED INDEX [IX_LayerSource_LayerSourceName]
    ON [gis].[LayerSource]([LayerSourceName] ASC);


GO
PRINT N'Creating [gis].[MapRenderer].[IX_MapRenderer_MapRendererLogicType]...';


GO
CREATE NONCLUSTERED INDEX [IX_MapRenderer_MapRendererLogicType]
    ON [gis].[MapRenderer]([MapRendererLogicType] ASC);


GO
PRINT N'Creating [gis].[MapRenderer].[IX_MapRenderer_MapRendererType]...';


GO
CREATE NONCLUSTERED INDEX [IX_MapRenderer_MapRendererType]
    ON [gis].[MapRenderer]([MapRendererType] ASC);


GO
PRINT N'Creating [gis].[MapRenderer].[IX_MapRenderer_ParentFolderId]...';


GO
CREATE NONCLUSTERED INDEX [IX_MapRenderer_ParentFolderId]
    ON [gis].[MapRenderer]([ParentFolderId] ASC);


GO
PRINT N'Creating [gis].[MapRendererCategory].[IX_MapRendererCategory_CategoryName]...';


GO
CREATE NONCLUSTERED INDEX [IX_MapRendererCategory_CategoryName]
    ON [gis].[MapRendererCategory]([CategoryName] ASC);


GO
PRINT N'Creating [gis].[UserMap].[IX_Map_CreatedBy]...';


GO
CREATE NONCLUSTERED INDEX [IX_Map_CreatedBy]
    ON [gis].[UserMap]([CreatedBy] ASC);


GO
PRINT N'Creating [gis].[UserMap].[IX_UserMap_CreatedBy]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserMap_CreatedBy]
    ON [gis].[UserMap]([CreatedBy] ASC);


GO
PRINT N'Creating [gis].[UserMap].[IX_UserMap_ParentFolderId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserMap_ParentFolderId]
    ON [gis].[UserMap]([ParentFolderId] ASC);


GO
PRINT N'Creating [gis].[UserMap].[IX_UserMap_UserMapName]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserMap_UserMapName]
    ON [gis].[UserMap]([UserMapName] ASC);


GO
PRINT N'Creating [gis].[UserMapCategory].[IX_UserMapCategory_CategoryName]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserMapCategory_CategoryName]
    ON [gis].[UserMapCategory]([CategoryName] ASC);


GO
PRINT N'Creating [gis].[UserMapLayer].[IX_UserMapLayer_LayerSourceId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserMapLayer_LayerSourceId]
    ON [gis].[UserMapLayer]([LayerSourceId] ASC);


GO
PRINT N'Creating [gis].[UserMapLayer].[IX_UserMapLayer_UserMapId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserMapLayer_UserMapId]
    ON [gis].[UserMapLayer]([UserMapId] ASC);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ChartTemplate]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ChartTemplate] FOREIGN KEY ([ChartTemplateId]) REFERENCES [cus].[ChartTemplate] ([ChartTemplateId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_CustomSearchColumnDefinition]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_CustomSearchColumnDefinition] FOREIGN KEY ([CustomSearchColumnDefinitionId]) REFERENCES [cus].[CustomSearchColumnDefinition] ([CustomSearchColumnDefinitionId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_CustomSearchParameter]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_CustomSearchParameter] FOREIGN KEY ([CustomSearchParameterId]) REFERENCES [cus].[CustomSearchParameter] ([CustomSearchParameterId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_CustomSearchValidationRule]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_CustomSearchValidationRule] FOREIGN KEY ([CustomSearchValidationRuleId]) REFERENCES [cus].[CustomSearchValidationRule] ([CustomSearchValidationRuleId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_DatasetPostProcess]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_DatasetPostProcess] FOREIGN KEY ([DatasetPostProcessId]) REFERENCES [cus].[DatasetPostProcess] ([DatasetPostProcessId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ExceptionPostProcessRule]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ExceptionPostProcessRule] FOREIGN KEY ([ExceptionPostProcessRuleId]) REFERENCES [cus].[ExceptionPostProcessRule] ([ExceptionPostProcessRuleId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToDataset]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToDataset] FOREIGN KEY ([DatasetID]) REFERENCES [cus].[Dataset] ([DatasetId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToExpressionRole]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToExpressionRole] FOREIGN KEY ([ExpressionRole]) REFERENCES [cus].[ExpressionRole] ([ExpressionRole]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToExpressionType]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToExpressionType] FOREIGN KEY ([ExpressionType]) REFERENCES [cus].[ExpressionType] ([ExpressionType]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToInteractiveChart]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToInteractiveChart] FOREIGN KEY ([DatasetChartId]) REFERENCES [cus].[InteractiveChart] ([InteractiveChartId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToOwnerType]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToOwnerType] FOREIGN KEY ([OwnerType]) REFERENCES [cus].[OwnerType] ([OwnerType]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToProjectType]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToProjectType] FOREIGN KEY ([ProjectTypeId]) REFERENCES [cus].[ProjectType] ([ProjectTypeId]);


GO
PRINT N'Creating [cus].[FK_CustomSearchExpression_ToRScriptModel]...';


GO
ALTER TABLE [cus].[CustomSearchExpression] WITH NOCHECK
    ADD CONSTRAINT [FK_CustomSearchExpression_ToRScriptModel] FOREIGN KEY ([RScriptModelId]) REFERENCES [cus].[RScriptModel] ([RScriptModelId]);


GO
